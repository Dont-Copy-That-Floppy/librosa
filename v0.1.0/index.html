<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Core methods &#8212; librosa 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/banner.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">librosa 0.1.0 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
</div>
<div class="section" id="module-librosa.core">
<span id="core-methods"></span><h1>Core methods<a class="headerlink" href="#module-librosa.core" title="Permalink to this headline">¶</a></h1>
<div class="section" id="core-io-and-dsp">
<h2>Core IO and DSP<a class="headerlink" href="#core-io-and-dsp" title="Permalink to this headline">¶</a></h2>
<div class="section" id="audio-processing">
<h3>Audio processing<a class="headerlink" href="#audio-processing" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="spectral-representations">
<h3>Spectral representations<a class="headerlink" href="#spectral-representations" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="magnitude-scaling">
<h3>Magnitude scaling<a class="headerlink" href="#magnitude-scaling" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="time-and-frequency-conversion">
<h3>Time and frequency conversion<a class="headerlink" href="#time-and-frequency-conversion" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="pitch-and-tuning">
<h3>Pitch and tuning<a class="headerlink" href="#pitch-and-tuning" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="dynamic-time-warping">
<h3>Dynamic Time Warping<a class="headerlink" href="#dynamic-time-warping" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="librosa.core.A_weighting">
<code class="descclassname">librosa.core.</code><code class="descname">A_weighting</code><span class="sig-paren">(</span><em>frequencies</em>, <em>min_db=-80.0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.A_weighting" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the A-weighting of a set of frequencies.</p>
<dl class="docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">scalar or np.ndarray [shape=(n,)]</span></dt>
<dd>One or more frequencies (in Hz)</dd>
<dt>min_db <span class="classifier-delimiter">:</span> <span class="classifier">float [scalar] or None</span></dt>
<dd>Clip weights below this threshold.
If <cite>None</cite>, no clipping is performed.</dd>
</dl>
<dl class="docutils">
<dt>A_weighting <span class="classifier-delimiter">:</span> <span class="classifier">scalar or np.ndarray [shape=(n,)]</span></dt>
<dd><cite>A_weighting[i]</cite> is the A-weighting of <cite>frequencies[i]</cite></dd>
</dl>
<p>perceptual_weighting</p>
<p>Get the A-weighting for CQT frequencies</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt_frequencies</span><span class="p">(</span><span class="mi">108</span><span class="p">,</span> <span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">(</span><span class="s1">&#39;C1&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">aw</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">A_weighting</span><span class="p">(</span><span class="n">freqs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">freqs</span><span class="p">,</span> <span class="n">aw</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Frequency (Hz)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Weighting (log10)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;A-Weighting of CQT frequencies&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.amplitude_to_db">
<code class="descclassname">librosa.core.</code><code class="descname">amplitude_to_db</code><span class="sig-paren">(</span><em>S</em>, <em>ref=1.0</em>, <em>amin=1e-05</em>, <em>top_db=80.0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.amplitude_to_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert an amplitude spectrogram to dB-scaled spectrogram.</p>
<p>This is equivalent to <code class="docutils literal"><span class="pre">power_to_db(S**2)</span></code>, but is provided for convenience.</p>
<dl class="docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>input amplitude</dd>
<dt>ref <span class="classifier-delimiter">:</span> <span class="classifier">scalar or callable</span></dt>
<dd><p class="first">If scalar, the amplitude <cite>abs(S)</cite> is scaled relative to <cite>ref</cite>:
<cite>20 * log10(S / ref)</cite>.
Zeros in the output correspond to positions where <cite>S == ref</cite>.</p>
<p class="last">If callable, the reference value is computed as <cite>ref(S)</cite>.</p>
</dd>
<dt>amin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>minimum threshold for <cite>S</cite> and <cite>ref</cite></dd>
<dt>top_db <span class="classifier-delimiter">:</span> <span class="classifier">float &gt;= 0 [scalar]</span></dt>
<dd>threshold the output at <cite>top_db</cite> below the peak:
<code class="docutils literal"><span class="pre">max(20</span> <span class="pre">*</span> <span class="pre">log10(S))</span> <span class="pre">-</span> <span class="pre">top_db</span></code></dd>
</dl>
<dl class="docutils">
<dt>S_db <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><code class="docutils literal"><span class="pre">S</span></code> measured in dB</dd>
</dl>
<p>power_to_db, db_to_amplitude</p>
<p>This function caches at level 30.</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.autocorrelate">
<code class="descclassname">librosa.core.</code><code class="descname">autocorrelate</code><span class="sig-paren">(</span><em>y</em>, <em>max_size=None</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.autocorrelate" title="Permalink to this definition">¶</a></dt>
<dd><p>Bounded auto-correlation</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>array to autocorrelate</dd>
<dt>max_size <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 or None</span></dt>
<dd>maximum correlation lag.
If unspecified, defaults to <cite>y.shape[axis]</cite> (unbounded)</dd>
<dt>axis <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The axis along which to autocorrelate.
By default, the last axis (-1) is taken.</dd>
</dl>
<dl class="docutils">
<dt>z <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>truncated autocorrelation <cite>y*y</cite> along the specified axis.
If <cite>max_size</cite> is specified, then <cite>z.shape[axis]</cite> is bounded
to <cite>max_size</cite>.</dd>
</dl>
<p>This function caches at level 20.</p>
<p>Compute full autocorrelation of y</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">(),</span> <span class="n">offset</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">autocorrelate</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">array([  3.226e+03,   3.217e+03, ...,   8.277e-04,   3.575e-04], dtype=float32)</span>
</pre></div>
</div>
<p>Compute onset strength auto-correlation up to 4 seconds</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">odf</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_strength</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ac</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">autocorrelate</span><span class="p">(</span><span class="n">odf</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">4</span><span class="o">*</span> <span class="n">sr</span> <span class="o">/</span> <span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ac</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Auto-correlation&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Lag (frames)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.clicks">
<code class="descclassname">librosa.core.</code><code class="descname">clicks</code><span class="sig-paren">(</span><em>times=None</em>, <em>frames=None</em>, <em>sr=22050</em>, <em>hop_length=512</em>, <em>click_freq=1000.0</em>, <em>click_duration=0.1</em>, <em>click=None</em>, <em>length=None</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.clicks" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a signal with the signal <cite>click</cite> placed at each specified time</p>
<dl class="docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray or None</span></dt>
<dd>times to place clicks, in seconds</dd>
<dt>frames <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray or None</span></dt>
<dd>frame indices to place clicks</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0</span></dt>
<dd>desired sampling rate of the output signal</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>if positions are specified by <cite>frames</cite>, the number of samples between frames.</dd>
<dt>click_freq <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd>frequency (in Hz) of the default click signal.  Default is 1KHz.</dd>
<dt>click_duration <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd>duration (in seconds) of the default click signal.  Default is 100ms.</dd>
<dt>click <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray or None</span></dt>
<dd>optional click signal sample to use instead of the default blip.</dd>
<dt>length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>desired number of samples in the output signal</dd>
</dl>
<dl class="docutils">
<dt>click_signal <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Synthesized click signal</dd>
</dl>
<dl class="docutils">
<dt>ParameterError</dt>
<dd><ul class="first last simple">
<li>If neither <cite>times</cite> nor <cite>frames</cite> are provided.</li>
<li>If any of <cite>click_freq</cite>, <cite>click_duration</cite>, or <cite>length</cite> are out of range.</li>
</ul>
</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Sonify detected beat events</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">clicks</span><span class="p">(</span><span class="n">frames</span><span class="o">=</span><span class="n">beats</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or generate a signal of the same length as y</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">clicks</span><span class="p">(</span><span class="n">frames</span><span class="o">=</span><span class="n">beats</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or use timing instead of frame indices</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">times</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">beats</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_beat_times</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">clicks</span><span class="p">(</span><span class="n">times</span><span class="o">=</span><span class="n">times</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or with a click frequency of 880Hz and a 500ms sample</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_beat_times880</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">clicks</span><span class="p">(</span><span class="n">times</span><span class="o">=</span><span class="n">times</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span>
<span class="gp">... </span>                                 <span class="n">click_freq</span><span class="o">=</span><span class="mi">880</span><span class="p">,</span> <span class="n">click_duration</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>Display click waveform next to the spectrogram</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">power_to_db</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;mel&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">waveplot</span><span class="p">(</span><span class="n">y_beat_times</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Beat clicks&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.cqt">
<code class="descclassname">librosa.core.</code><code class="descname">cqt</code><span class="sig-paren">(</span><em>y</em>, <em>sr=22050</em>, <em>hop_length=512</em>, <em>fmin=None</em>, <em>n_bins=84</em>, <em>bins_per_octave=12</em>, <em>tuning=0.0</em>, <em>filter_scale=1</em>, <em>norm=1</em>, <em>sparsity=0.01</em>, <em>window='hann'</em>, <em>scale=True</em>, <em>pad_mode='reflect'</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.cqt" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the constant-Q transform of an audio signal.</p>
<p>This implementation is based on the recursive sub-sampling method
described by <a href="#id33"><span class="problematic" id="id1">[1]_</span></a>.</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Schoerkhuber, Christian, and Anssi Klapuri.
&#8220;Constant-Q transform toolbox for music processing.&#8221;
7th Sound and Music Computing Conference, Barcelona, Spain. 2010.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number of samples between successive CQT columns.</dd>
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>Minimum frequency. Defaults to C1 ~= 32.70 Hz</dd>
<dt>n_bins <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>Number of frequency bins, starting at <cite>fmin</cite></dd>
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>Number of bins per octave</dd>
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">None or float in <cite>[-0.5, 0.5)</cite></span></dt>
<dd><p class="first">Tuning offset in fractions of a bin (cents).</p>
<p class="last">If <cite>None</cite>, tuning will be automatically estimated from the signal.</p>
</dd>
<dt>filter_scale <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd>Filter scale factor. Small values (&lt;1) use shorter windows
for improved time resolution.</dd>
<dt>norm <span class="classifier-delimiter">:</span> <span class="classifier">{inf, -inf, 0, float &gt; 0}</span></dt>
<dd>Type of norm to use for basis function normalization.
See <cite>librosa.util.normalize</cite>.</dd>
<dt>sparsity <span class="classifier-delimiter">:</span> <span class="classifier">float in [0, 1)</span></dt>
<dd><p class="first">Sparsify the CQT basis by discarding up to <cite>sparsity</cite>
fraction of the energy in each basis.</p>
<p class="last">Set <cite>sparsity=0</cite> to disable sparsification.</p>
</dd>
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">str, tuple, number, or function</span></dt>
<dd>Window specification for the basis filters.
See <cite>filters.get_window</cite> for details.</dd>
<dt>scale <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first">If <cite>True</cite>, scale the CQT response by square-root the length of
each channel&#8217;s filter.  This is analogous to <cite>norm=&#8217;ortho&#8217;</cite> in FFT.</p>
<p class="last">If <cite>False</cite>, do not scale the CQT. This is analogous to
<cite>norm=None</cite> in FFT.</p>
</dd>
<dt>pad_mode <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first">Padding mode for centered frame analysis.</p>
<p class="last">See also: <cite>librosa.core.stft</cite> and <cite>np.pad</cite>.</p>
</dd>
</dl>
<dl class="docutils">
<dt>CQT <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n_bins, t), dtype=np.complex or np.float]</span></dt>
<dd>Constant-Q value each frequency at each time.</dd>
</dl>
<dl class="docutils">
<dt>ParameterError</dt>
<dd><p class="first">If <cite>hop_length</cite> is not an integer multiple of
<cite>2**(n_bins / bins_per_octave)</cite></p>
<p class="last">Or if <cite>y</cite> is too short to support the frequency range of the CQT.</p>
</dd>
</dl>
<p>librosa.core.resample
librosa.util.normalize</p>
<p>This function caches at level 20.</p>
<p>Generate and plot a constant-Q power spectrum</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">C</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;cqt_note&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%+2.0f</span><span class="s1"> dB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Constant-Q power spectrum&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<p>Limit the frequency range</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">(</span><span class="s1">&#39;C2&#39;</span><span class="p">),</span>
<span class="gp">... </span>                <span class="n">n_bins</span><span class="o">=</span><span class="mi">60</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span>
<span class="go">array([[  8.827e-04,   9.293e-04, ...,   3.133e-07,   2.942e-07],</span>
<span class="go">       [  1.076e-03,   1.068e-03, ...,   1.153e-06,   1.148e-06],</span>
<span class="go">       ...,</span>
<span class="go">       [  1.042e-07,   4.087e-07, ...,   1.612e-07,   1.928e-07],</span>
<span class="go">       [  2.363e-07,   5.329e-07, ...,   1.294e-07,   1.611e-07]])</span>
</pre></div>
</div>
<p>Using a higher frequency resolution</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">(</span><span class="s1">&#39;C2&#39;</span><span class="p">),</span>
<span class="gp">... </span>                <span class="n">n_bins</span><span class="o">=</span><span class="mi">60</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="n">bins_per_octave</span><span class="o">=</span><span class="mi">12</span> <span class="o">*</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span>
<span class="go">array([[  1.536e-05,   5.848e-05, ...,   3.241e-07,   2.453e-07],</span>
<span class="go">       [  1.856e-03,   1.854e-03, ...,   2.397e-08,   3.549e-08],</span>
<span class="go">       ...,</span>
<span class="go">       [  2.034e-07,   4.245e-07, ...,   6.213e-08,   1.463e-07],</span>
<span class="go">       [  4.896e-08,   5.407e-07, ...,   9.176e-08,   1.051e-07]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.cqt_frequencies">
<code class="descclassname">librosa.core.</code><code class="descname">cqt_frequencies</code><span class="sig-paren">(</span><em>n_bins</em>, <em>fmin</em>, <em>bins_per_octave=12</em>, <em>tuning=0.0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.cqt_frequencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the center frequencies of Constant-Q bins.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get the CQT frequencies for 24 notes, starting at C2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">cqt_frequencies</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">(</span><span class="s1">&#39;C2&#39;</span><span class="p">))</span>
<span class="go">array([  65.406,   69.296,   73.416,   77.782,   82.407,   87.307,</span>
<span class="go">         92.499,   97.999,  103.826,  110.   ,  116.541,  123.471,</span>
<span class="go">        130.813,  138.591,  146.832,  155.563,  164.814,  174.614,</span>
<span class="go">        184.997,  195.998,  207.652,  220.   ,  233.082,  246.942])</span>
</pre></div>
</div>
<dl class="docutils">
<dt>n_bins <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>Number of constant-Q bins</dd>
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>Minimum frequency</dd>
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>Number of bins per octave</dd>
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">float in <cite>[-0.5, +0.5)</cite></span></dt>
<dd>Deviation from A440 tuning in fractional bins (cents)</dd>
</dl>
<dl class="docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n_bins,)]</span></dt>
<dd>Center frequency for each CQT bin</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="librosa.core.db_to_amplitude">
<code class="descclassname">librosa.core.</code><code class="descname">db_to_amplitude</code><span class="sig-paren">(</span><em>S_db</em>, <em>ref=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.db_to_amplitude" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a dB-scaled spectrogram to an amplitude spectrogram.</p>
<p>This effectively inverts <cite>amplitude_to_db</cite>:</p>
<blockquote>
<div><cite>db_to_amplitude(S_db) ~= 10.0**(0.5 * (S_db + log10(ref)/10))</cite></div></blockquote>
<dl class="docutils">
<dt>S_db <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>dB-scaled spectrogram</dd>
<dt>ref: number &gt; 0</dt>
<dd>Optional reference power.</dd>
</dl>
<dl class="docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Linear magnitude spectrogram</dd>
</dl>
<p>This function caches at level 30.</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.db_to_power">
<code class="descclassname">librosa.core.</code><code class="descname">db_to_power</code><span class="sig-paren">(</span><em>S_db</em>, <em>ref=1.0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.db_to_power" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a dB-scale spectrogram to a power spectrogram.</p>
<p>This effectively inverts <cite>power_to_db</cite>:</p>
<blockquote>
<div><cite>db_to_power(S_db) ~= ref * 10.0**(S_db / 10)</cite></div></blockquote>
<dl class="docutils">
<dt>S_db <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>dB-scaled spectrogram</dd>
<dt>ref <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0</span></dt>
<dd>Reference power: output will be scaled by this value</dd>
</dl>
<dl class="docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Power spectrogram</dd>
</dl>
<p>This function caches at level 30.</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.dtw">
<code class="descclassname">librosa.core.</code><code class="descname">dtw</code><span class="sig-paren">(</span><em>X=None</em>, <em>Y=None</em>, <em>C=None</em>, <em>metric='euclidean'</em>, <em>step_sizes_sigma=None</em>, <em>weights_add=None</em>, <em>weights_mul=None</em>, <em>subseq=False</em>, <em>backtrack=True</em>, <em>global_constraints=False</em>, <em>band_rad=0.25</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.dtw" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamic time warping (DTW).</p>
<p>This function performs a DTW and path backtracking on two sequences.
We follow the nomenclature and algorithmic approach as described in [1].</p>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Meinard Mueller
Fundamentals of Music Processing — Audio, Analysis, Algorithms, Applications
Springer Verlag, ISBN: 978-3-319-21944-8, 2015.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>X <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(K, N)]</span></dt>
<dd>audio feature matrix (e.g., chroma features)</dd>
<dt>Y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(K, M)]</span></dt>
<dd>audio feature matrix (e.g., chroma features)</dd>
<dt>C <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(N, M)]</span></dt>
<dd>Precomputed distance matrix. If supplied, X and Y must not be supplied and
<code class="docutils literal"><span class="pre">metric</span></code> will be ignored.</dd>
<dt>metric <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Identifier for the cost-function as documented
in <cite>scipy.spatial.cdist()</cite></dd>
<dt>step_sizes_sigma <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=[n, 2]]</span></dt>
<dd>Specifies allowed step sizes as used by the dtw.</dd>
<dt>weights_add <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=[n, ]]</span></dt>
<dd>Additive weights to penalize certain step sizes.</dd>
<dt>weights_mul <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=[n, ]]</span></dt>
<dd>Multiplicative weights to penalize certain step sizes.</dd>
<dt>subseq <span class="classifier-delimiter">:</span> <span class="classifier">binary</span></dt>
<dd>Enable subsequence DTW, e.g., for retrieval tasks.</dd>
<dt>backtrack <span class="classifier-delimiter">:</span> <span class="classifier">binary</span></dt>
<dd>Enable backtracking in accumulated cost matrix.</dd>
<dt>global_constraints <span class="classifier-delimiter">:</span> <span class="classifier">binary</span></dt>
<dd>Applies global constraints to the cost matrix <code class="docutils literal"><span class="pre">C</span></code> (Sakoe-Chiba band).</dd>
<dt>band_rad <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The Sakoe-Chiba band radius (1/2 of the width) will be
<code class="docutils literal"><span class="pre">int(radius*min(C.shape))</span></code>.</dd>
</dl>
<dl class="docutils">
<dt>D <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(N,M)]</span></dt>
<dd>accumulated cost matrix.
D[N,M] is the total alignment cost.
When doing subsequence DTW, D[N,:] indicates a matching function.</dd>
<dt>wp <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(N,2)]</span></dt>
<dd>Warping path with index pairs.
Each row of the array contains an index pair n,m).
Only returned when <code class="docutils literal"><span class="pre">backtrack</span></code> is True.</dd>
</dl>
<dl class="docutils">
<dt>ParameterError</dt>
<dd>If you are doing diagonal matching and Y is shorter than X or if an incompatible
combination of X, Y, and C are supplied.
If your input dimensions are incompatible.</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">(),</span> <span class="n">offset</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">X</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">chroma_cens</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">noise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">rand</span><span class="p">(</span><span class="n">X</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="mi">200</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">((</span><span class="n">noise</span><span class="p">,</span> <span class="n">noise</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">noise</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span><span class="p">,</span> <span class="n">wp</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">dtw</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">subseq</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;frames&#39;</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;frames&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Database excerpt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">wp</span><span class="p">[:,</span> <span class="mi">1</span><span class="p">],</span> <span class="n">wp</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Optimal path&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">D</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="p">:]</span> <span class="o">/</span> <span class="n">wp</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">Y</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Matching cost function&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.estimate_tuning">
<code class="descclassname">librosa.core.</code><code class="descname">estimate_tuning</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_fft=2048</em>, <em>resolution=0.01</em>, <em>bins_per_octave=12</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.estimate_tuning" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the tuning of an audio time series or spectrogram input.</p>
<dl class="docutils">
<dt>y: np.ndarray [shape=(n,)] or None</dt>
<dd>audio signal</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>audio sampling rate of <cite>y</cite></dd>
<dt>S: np.ndarray [shape=(d, t)] or None</dt>
<dd>magnitude or power spectrogram</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar] or None</span></dt>
<dd>number of FFT bins to use, if <cite>y</cite> is provided.</dd>
<dt>resolution <span class="classifier-delimiter">:</span> <span class="classifier">float in <cite>(0, 1)</cite></span></dt>
<dd>Resolution of the tuning as a fraction of a bin.
0.01 corresponds to measurements in cents.</dd>
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>How many frequency bins per octave</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd>Additional arguments passed to <cite>piptrack</cite></dd>
</dl>
<dl class="docutils">
<dt>tuning: float in <cite>[-0.5, 0.5)</cite></dt>
<dd>estimated tuning deviation (fractions of a bin)</dd>
</dl>
<dl class="docutils">
<dt>piptrack</dt>
<dd>Pitch tracking by parabolic interpolation</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># With time-series input</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">estimate_tuning</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="go">0.089999999999999969</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># In tenths of a cent</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">estimate_tuning</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mf">1e-3</span><span class="p">)</span>
<span class="go">0.093999999999999972</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Using spectrogram input</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">estimate_tuning</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="go">0.089999999999999969</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Using pass-through arguments to `librosa.piptrack`</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">estimate_tuning</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">8192</span><span class="p">,</span>
<span class="gp">... </span>                        <span class="n">fmax</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">(</span><span class="s1">&#39;G#9&#39;</span><span class="p">))</span>
<span class="go">0.070000000000000062</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.fft_frequencies">
<code class="descclassname">librosa.core.</code><code class="descname">fft_frequencies</code><span class="sig-paren">(</span><em>sr=22050</em>, <em>n_fft=2048</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.fft_frequencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Alternative implementation of <cite>np.fft.fftfreqs</cite></p>
<dl class="docutils">
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>Audio sampling rate</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>FFT window size</dd>
</dl>
<dl class="docutils">
<dt>freqs <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(1 + n_fft/2,)]</span></dt>
<dd>Frequencies <cite>(0, sr/n_fft, 2*sr/n_fft, ..., sr/2)</cite></dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">fft_frequencies</span><span class="p">(</span><span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="go">array([     0.   ,   1378.125,   2756.25 ,   4134.375,</span>
<span class="go">         5512.5  ,   6890.625,   8268.75 ,   9646.875,  11025.   ])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.fill_off_diagonal">
<code class="descclassname">librosa.core.</code><code class="descname">fill_off_diagonal</code><span class="sig-paren">(</span><em>x</em>, <em>radius</em>, <em>value=0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.fill_off_diagonal" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets all cells of a matrix to a given <code class="docutils literal"><span class="pre">value</span></code>
if they lie outside a constraint region.
In this case, the constraint region is the
Sakoe-Chiba band which runs with a fixed <code class="docutils literal"><span class="pre">radius</span></code>
along the main diagonal.
When <code class="docutils literal"><span class="pre">x.shape[0]</span> <span class="pre">!=</span> <span class="pre">x.shape[1]</span></code>, the radius will be
expanded so that <code class="docutils literal"><span class="pre">x[-1,</span> <span class="pre">-1]</span> <span class="pre">=</span> <span class="pre">1</span></code> always.</p>
<p><code class="docutils literal"><span class="pre">x</span></code> will be modified in place.</p>
<dl class="docutils">
<dt>x <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(N, M)]</span></dt>
<dd>Input matrix, will be modified in place.</dd>
<dt>radius <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The band radius (1/2 of the width) will be
<code class="docutils literal"><span class="pre">int(radius*min(x.shape))</span></code>.</dd>
<dt>value <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd><code class="docutils literal"><span class="pre">x[n,</span> <span class="pre">m]</span> <span class="pre">=</span> <span class="pre">value</span></code> when <code class="docutils literal"><span class="pre">(n,</span> <span class="pre">m)</span></code> lies outside the band.</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">global_constraints</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">array([[1, 1, 0, 0, 0, 0, 0, 0],</span>
<span class="go">       [1, 1, 1, 0, 0, 0, 0, 0],</span>
<span class="go">       [0, 1, 1, 1, 0, 0, 0, 0],</span>
<span class="go">       [0, 0, 1, 1, 1, 0, 0, 0],</span>
<span class="go">       [0, 0, 0, 1, 1, 1, 0, 0],</span>
<span class="go">       [0, 0, 0, 0, 1, 1, 1, 0],</span>
<span class="go">       [0, 0, 0, 0, 0, 1, 1, 1],</span>
<span class="go">       [0, 0, 0, 0, 0, 0, 1, 1]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">((</span><span class="mi">8</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">global_constraints</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">array([[1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0],</span>
<span class="go">       [1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0],</span>
<span class="go">       [0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0],</span>
<span class="go">       [0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0],</span>
<span class="go">       [0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0],</span>
<span class="go">       [0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0],</span>
<span class="go">       [0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1],</span>
<span class="go">       [0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.fmt">
<code class="descclassname">librosa.core.</code><code class="descname">fmt</code><span class="sig-paren">(</span><em>y</em>, <em>t_min=0.5</em>, <em>n_fmt=None</em>, <em>kind='cubic'</em>, <em>beta=0.5</em>, <em>over_sample=1</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.fmt" title="Permalink to this definition">¶</a></dt>
<dd><p>The fast Mellin transform (FMT) <a href="#id34"><span class="problematic" id="id4">[1]_</span></a> of a uniformly sampled signal y.</p>
<p>When the Mellin parameter (beta) is 1/2, it is also known as the scale transform <a class="footnote-reference" href="#id7" id="id5">[2]</a>.
The scale transform can be useful for audio analysis because its magnitude is invariant
to scaling of the domain (e.g., time stretching or compression).  This is analogous
to the magnitude of the Fourier transform being invariant to shifts in the input domain.</p>
<table class="docutils footnote" frame="void" id="id6" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>De Sena, Antonio, and Davide Rocchesso.
&#8220;A fast Mellin and scale transform.&#8221;
EURASIP Journal on Applied Signal Processing 2007.1 (2007): 75-75.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id7" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id5">[2]</a></td><td>Cohen, L.
&#8220;The scale representation.&#8221;
IEEE Transactions on Signal Processing 41, no. 12 (1993): 3275-3292.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, real-valued</span></dt>
<dd>The input signal(s).  Can be multidimensional.
The target axis must contain at least 3 samples.</dd>
<dt>t_min <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd>The minimum time spacing (in samples).
This value should generally be less than 1 to preserve as much information as
possible.</dd>
<dt>n_fmt <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 2 or None</span></dt>
<dd>The number of scale transform bins to use.
If None, then <cite>n_bins = over_sample * ceil(n * log((n-1)/t_min))</cite> is taken,
where <cite>n = y.shape[axis]</cite></dd>
<dt>kind <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first">The type of interpolation to use when re-sampling the input.
See <cite>scipy.interpolate.interp1d</cite> for possible values.</p>
<p class="last">Note that the default is to use high-precision (cubic) interpolation.
This can be slow in practice; if speed is preferred over accuracy,
then consider using <cite>kind=&#8217;linear&#8217;</cite>.</p>
</dd>
<dt>beta <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The Mellin parameter.  <cite>beta=0.5</cite> provides the scale transform.</dd>
<dt>over_sample <span class="classifier-delimiter">:</span> <span class="classifier">float &gt;= 1</span></dt>
<dd>Over-sampling factor for exponential resampling.</dd>
<dt>axis <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The axis along which to transform <cite>y</cite></dd>
</dl>
<dl class="docutils">
<dt>x_scale <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [dtype=complex]</span></dt>
<dd>The scale transform of <cite>y</cite> along the <cite>axis</cite> dimension.</dd>
</dl>
<dl class="docutils">
<dt>ParameterError</dt>
<dd>if <cite>n_fmt &lt; 2</cite> or <cite>t_min &lt;= 0</cite>
or if <cite>y</cite> is not finite
or if <cite>y.shape[axis] &lt; 3</cite>.</dd>
</dl>
<p>This function caches at level 30.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Generate a signal and time-stretch it (with energy normalization)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scale</span> <span class="o">=</span> <span class="mf">1.25</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freq</span> <span class="o">=</span> <span class="mf">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">num</span><span class="o">=</span><span class="n">scale</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">x1</span><span class="p">),</span> <span class="n">endpoint</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y1</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">freq</span> <span class="o">*</span> <span class="n">x1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y2</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">freq</span> <span class="o">*</span> <span class="n">x2</span><span class="p">)</span> <span class="o">/</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">scale</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Verify that the two signals have the same energy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y1</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y2</span><span class="p">)</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">    (255.99999999999997, 255.99999999999969)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scale1</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">fmt</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">n_fmt</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">scale2</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">fmt</span><span class="p">(</span><span class="n">y2</span><span class="p">,</span> <span class="n">n_fmt</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># And plot the results</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y1</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Original&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y2</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Stretched&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;time (samples)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Input signals&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">semilogy</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">scale1</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Original&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">semilogy</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">scale2</span><span class="p">),</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Stretched&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;scale coefficients&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Scale transform magnitude&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot the scale transform of an onset strength autocorrelation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">(),</span>
<span class="gp">... </span>                     <span class="n">offset</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">30.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">odf</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_strength</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Auto-correlate with up to 10 seconds lag</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">odf_ac</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">autocorrelate</span><span class="p">(</span><span class="n">odf</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="mi">10</span> <span class="o">*</span> <span class="n">sr</span> <span class="o">//</span> <span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Normalize</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">odf_ac</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">odf_ac</span><span class="p">,</span> <span class="n">norm</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">inf</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Compute the scale transform</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">odf_ac_scale</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">fmt</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">odf_ac</span><span class="p">),</span> <span class="n">n_fmt</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot the results</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">odf</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Onset strength&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Time (frames)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">odf_ac</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Onset autocorrelation&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Lag (frames)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">semilogy</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">odf_ac_scale</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Scale transform magnitude&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;scale coefficients&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.frames_to_samples">
<code class="descclassname">librosa.core.</code><code class="descname">frames_to_samples</code><span class="sig-paren">(</span><em>frames</em>, <em>hop_length=512</em>, <em>n_fft=None</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.frames_to_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts frame indices to audio sample indices</p>
<dl class="docutils">
<dt>frames <span class="classifier-delimiter">:</span> <span class="classifier">number or np.ndarray [shape=(n,)]</span></dt>
<dd>frame index or vector of frame indices</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number of samples between successive frames</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">None or int &gt; 0 [scalar]</span></dt>
<dd>Optional: length of the FFT window.
If given, time conversion will include an offset of <cite>n_fft / 2</cite>
to counteract windowing effects when using a non-centered STFT.</dd>
</dl>
<dl class="docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">number or np.ndarray</span></dt>
<dd>time (in samples) of each given frame number:
<cite>times[i] = frames[i] * hop_length</cite></dd>
</dl>
<p>frames_to_time : convert frame indices to time values
samples_to_frames : convert sample indices to frame indices</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beat_samples</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_samples</span><span class="p">(</span><span class="n">beats</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.frames_to_time">
<code class="descclassname">librosa.core.</code><code class="descname">frames_to_time</code><span class="sig-paren">(</span><em>frames</em>, <em>sr=22050</em>, <em>hop_length=512</em>, <em>n_fft=None</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.frames_to_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts frame counts to time (seconds)</p>
<dl class="docutils">
<dt>frames <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>frame index or vector of frame indices</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>audio sampling rate</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number of samples between successive frames</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">None or int &gt; 0 [scalar]</span></dt>
<dd>Optional: length of the FFT window.
If given, time conversion will include an offset of <cite>n_fft / 2</cite>
to counteract windowing effects when using a non-centered STFT.</dd>
</dl>
<dl class="docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>time (in seconds) of each given frame number:
<cite>times[i] = frames[i] * hop_length / sr</cite></dd>
</dl>
<p>time_to_frames : convert time values to frame indices
frames_to_samples : convert frame indices to sample indices</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beat_times</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">beats</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.get_duration">
<code class="descclassname">librosa.core.</code><code class="descname">get_duration</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_fft=2048</em>, <em>hop_length=512</em>, <em>center=True</em>, <em>filename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.get_duration" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the duration (in seconds) of an audio time series,
feature matrix, or filename.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load the example audio file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">get_duration</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="go">61.44</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or directly from an audio file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">get_duration</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="go">61.4</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or compute duration from an STFT matrix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">get_duration</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="go">61.44</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or a non-centered STFT matrix</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S_left</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">get_duration</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S_left</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="go">61.3471201814059</span>
</pre></div>
</div>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,), (2, n)] or None</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>audio sampling rate of <cite>y</cite></dd>
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] or None</span></dt>
<dd>STFT matrix, or any STFT-derived matrix (e.g., chromagram
or mel spectrogram).</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>FFT window size for <cite>S</cite></dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [ scalar]</span></dt>
<dd>number of audio samples between columns of <cite>S</cite></dd>
<dt>center <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><ul class="first last simple">
<li>If <cite>True</cite>, <cite>S[:, t]</cite> is centered at <cite>y[t * hop_length]</cite></li>
<li>If <cite>False</cite>, then <cite>S[:, t]</cite> begins at <cite>y[t * hop_length]</cite></li>
</ul>
</dd>
<dt>filename <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>If provided, all other parameters are ignored, and the
duration is calculated directly from the audio file.
Note that this avoids loading the contents into memory,
and is therefore useful for querying the duration of
long files.</dd>
</dl>
<dl class="docutils">
<dt>d <span class="classifier-delimiter">:</span> <span class="classifier">float &gt;= 0</span></dt>
<dd>Duration (in seconds) of the input time series or spectrogram.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="librosa.core.hybrid_cqt">
<code class="descclassname">librosa.core.</code><code class="descname">hybrid_cqt</code><span class="sig-paren">(</span><em>y</em>, <em>sr=22050</em>, <em>hop_length=512</em>, <em>fmin=None</em>, <em>n_bins=84</em>, <em>bins_per_octave=12</em>, <em>tuning=0.0</em>, <em>filter_scale=1</em>, <em>norm=1</em>, <em>sparsity=0.01</em>, <em>window='hann'</em>, <em>scale=True</em>, <em>pad_mode='reflect'</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.hybrid_cqt" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the hybrid constant-Q transform of an audio signal.</p>
<p>Here, the hybrid CQT uses the pseudo CQT for higher frequencies where
the hop_length is longer than half the filter length and the full CQT
for lower frequencies.</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number of samples between successive CQT columns.</dd>
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>Minimum frequency. Defaults to C1 ~= 32.70 Hz</dd>
<dt>n_bins <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>Number of frequency bins, starting at <cite>fmin</cite></dd>
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>Number of bins per octave</dd>
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">None or float in <cite>[-0.5, 0.5)</cite></span></dt>
<dd><p class="first">Tuning offset in fractions of a bin (cents).</p>
<p class="last">If <cite>None</cite>, tuning will be automatically estimated from the signal.</p>
</dd>
<dt>filter_scale <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd>Filter filter_scale factor. Larger values use longer windows.</dd>
<dt>sparsity <span class="classifier-delimiter">:</span> <span class="classifier">float in [0, 1)</span></dt>
<dd><p class="first">Sparsify the CQT basis by discarding up to <cite>sparsity</cite>
fraction of the energy in each basis.</p>
<p class="last">Set <cite>sparsity=0</cite> to disable sparsification.</p>
</dd>
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">str, tuple, number, or function</span></dt>
<dd>Window specification for the basis filters.
See <cite>filters.get_window</cite> for details.</dd>
<dt>pad_mode <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first">Padding mode for centered frame analysis.</p>
<p class="last">See also: <cite>librosa.core.stft</cite> and <cite>np.pad</cite>.</p>
</dd>
</dl>
<dl class="docutils">
<dt>CQT <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n_bins, t), dtype=np.float]</span></dt>
<dd>Constant-Q energy for each frequency at each time.</dd>
</dl>
<dl class="docutils">
<dt>ParameterError</dt>
<dd><p class="first">If <cite>hop_length</cite> is not an integer multiple of
<cite>2**(n_bins / bins_per_octave)</cite></p>
<p class="last">Or if <cite>y</cite> is too short to support the frequency range of the CQT.</p>
</dd>
</dl>
<p>cqt
pseudo_cqt</p>
<p>This function caches at level 20.</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.hz_to_mel">
<code class="descclassname">librosa.core.</code><code class="descname">hz_to_mel</code><span class="sig-paren">(</span><em>frequencies</em>, <em>htk=False</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.hz_to_mel" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert Hz to Mels</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_mel</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
<span class="go">0.9</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_mel</span><span class="p">([</span><span class="mi">110</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">440</span><span class="p">])</span>
<span class="go">array([ 1.65,  3.3 ,  6.6 ])</span>
</pre></div>
</div>
<dl class="docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">number or np.ndarray [shape=(n,)] , float</span></dt>
<dd>scalar or array of frequencies</dd>
<dt>htk <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>use HTK formula instead of Slaney</dd>
</dl>
<dl class="docutils">
<dt>mels <span class="classifier-delimiter">:</span> <span class="classifier">number or np.ndarray [shape=(n,)]</span></dt>
<dd>input frequencies in Mels</dd>
</dl>
<p>mel_to_hz</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.hz_to_midi">
<code class="descclassname">librosa.core.</code><code class="descname">hz_to_midi</code><span class="sig-paren">(</span><em>frequencies</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.hz_to_midi" title="Permalink to this definition">¶</a></dt>
<dd><p>Get MIDI note number(s) for given frequencies</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_midi</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>
<span class="go">34.506</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_midi</span><span class="p">([</span><span class="mi">110</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">440</span><span class="p">])</span>
<span class="go">array([ 45.,  57.,  69.])</span>
</pre></div>
</div>
<dl class="docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">float or np.ndarray [shape=(n,), dtype=float]</span></dt>
<dd>frequencies to convert</dd>
</dl>
<dl class="docutils">
<dt>note_nums <span class="classifier-delimiter">:</span> <span class="classifier">number or np.ndarray [shape=(n,), dtype=float]</span></dt>
<dd>MIDI notes to <cite>frequencies</cite></dd>
</dl>
<p>midi_to_hz
note_to_midi
hz_to_note</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.hz_to_note">
<code class="descclassname">librosa.core.</code><code class="descname">hz_to_note</code><span class="sig-paren">(</span><em>frequencies</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.hz_to_note" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert one or more frequencies (in Hz) to the nearest note names.</p>
<dl class="docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">float or iterable of float</span></dt>
<dd>Input frequencies, specified in Hz</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd>Arguments passed through to <cite>midi_to_note</cite></dd>
</dl>
<dl class="docutils">
<dt>notes <span class="classifier-delimiter">:</span> <span class="classifier">list of str</span></dt>
<dd><cite>notes[i]</cite> is the closest note name to <cite>frequency[i]</cite>
(or <cite>frequency</cite> if the input is scalar)</dd>
</dl>
<p>hz_to_midi
midi_to_note
note_to_hz</p>
<p>Get a single note name for a frequency</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_note</span><span class="p">(</span><span class="mf">440.0</span><span class="p">)</span>
<span class="go">[&#39;A5&#39;]</span>
</pre></div>
</div>
<p>Get multiple notes with cent deviation</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_note</span><span class="p">([</span><span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">],</span> <span class="n">cents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">[&#39;C1-38&#39;, &#39;C2-38&#39;]</span>
</pre></div>
</div>
<p>Get multiple notes, but suppress octave labels</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_note</span><span class="p">(</span><span class="mf">440.0</span> <span class="o">*</span> <span class="p">(</span><span class="mf">2.0</span> <span class="o">**</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">12</span><span class="p">)),</span>
<span class="gp">... </span>                   <span class="n">octave</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">[&#39;A&#39;, &#39;A#&#39;, &#39;B&#39;, &#39;C&#39;, &#39;C#&#39;, &#39;D&#39;, &#39;E&#39;, &#39;F&#39;, &#39;F#&#39;, &#39;G&#39;, &#39;G#&#39;, &#39;A&#39;]</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.hz_to_octs">
<code class="descclassname">librosa.core.</code><code class="descname">hz_to_octs</code><span class="sig-paren">(</span><em>frequencies</em>, <em>A440=440.0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.hz_to_octs" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert frequencies (Hz) to (fractional) octave numbers.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_octs</span><span class="p">(</span><span class="mf">440.0</span><span class="p">)</span>
<span class="go">4.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_octs</span><span class="p">([</span><span class="mi">32</span><span class="p">,</span> <span class="mi">64</span><span class="p">,</span> <span class="mi">128</span><span class="p">,</span> <span class="mi">256</span><span class="p">])</span>
<span class="go">array([ 0.219,  1.219,  2.219,  3.219])</span>
</pre></div>
</div>
<dl class="docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">number &gt;0 or np.ndarray [shape=(n,)] or float</span></dt>
<dd>scalar or vector of frequencies</dd>
<dt>A440 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>frequency of A440 (in Hz)</dd>
</dl>
<dl class="docutils">
<dt>octaves <span class="classifier-delimiter">:</span> <span class="classifier">number or np.ndarray [shape=(n,)]</span></dt>
<dd>octave number for each frequency</dd>
</dl>
<p>octs_to_hz</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.icqt">
<code class="descclassname">librosa.core.</code><code class="descname">icqt</code><span class="sig-paren">(</span><em>C</em>, <em>sr=22050</em>, <em>hop_length=512</em>, <em>fmin=None</em>, <em>bins_per_octave=12</em>, <em>tuning=0.0</em>, <em>filter_scale=1</em>, <em>norm=1</em>, <em>sparsity=0.01</em>, <em>window='hann'</em>, <em>scale=True</em>, <em>amin=1e-06</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.icqt" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the inverse constant-Q transform.</p>
<p>Given a constant-Q transform representation <cite>C</cite> of an audio signal <cite>y</cite>,
this function produces an approximation <cite>y_hat</cite>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This implementation is unstable, and subject to change in
future versions of librosa.  We recommend that its use be
limited to sonification and diagnostic applications.</p>
</div>
<dl class="docutils">
<dt>C <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, [shape=(n_bins, n_frames)]</span></dt>
<dd>Constant-Q representation as produced by <cite>core.cqt</cite></dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number of samples between successive frames</dd>
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>Minimum frequency. Defaults to C1 ~= 32.70 Hz</dd>
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">float in <cite>[-0.5, 0.5)</cite> [scalar]</span></dt>
<dd>Tuning offset in fractions of a bin (cents).</dd>
<dt>filter_scale <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>Filter scale factor. Small values (&lt;1) use shorter windows
for improved time resolution.</dd>
<dt>norm <span class="classifier-delimiter">:</span> <span class="classifier">{inf, -inf, 0, float &gt; 0}</span></dt>
<dd>Type of norm to use for basis function normalization.
See <cite>librosa.util.normalize</cite>.</dd>
<dt>sparsity <span class="classifier-delimiter">:</span> <span class="classifier">float in [0, 1)</span></dt>
<dd><p class="first">Sparsify the CQT basis by discarding up to <cite>sparsity</cite>
fraction of the energy in each basis.</p>
<p class="last">Set <cite>sparsity=0</cite> to disable sparsification.</p>
</dd>
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">str, tuple, number, or function</span></dt>
<dd>Window specification for the basis filters.
See <cite>filters.get_window</cite> for details.</dd>
<dt>scale <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first">If <cite>True</cite>, scale the CQT response by square-root the length
of each channel&#8217;s filter. This is analogous to <cite>norm=&#8217;ortho&#8217;</cite> in FFT.</p>
<p class="last">If <cite>False</cite>, do not scale the CQT. This is analogous to <cite>norm=None</cite>
in FFT.</p>
</dd>
<dt>amin <span class="classifier-delimiter">:</span> <span class="classifier">float or None</span></dt>
<dd><p class="first">When applying squared window normalization, sample positions with
coefficients below <cite>amin</cite> will left as is.</p>
<p class="last">If <cite>None</cite>, then <cite>amin</cite> is inferred as the smallest valid floating
point value.</p>
</dd>
</dl>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, [shape=(n_samples), dtype=np.float]</span></dt>
<dd>Audio time-series reconstructed from the CQT representation.</dd>
</dl>
<p>cqt</p>
<p>This function caches at level 40.</p>
<p>Using default parameters</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">(),</span> <span class="n">duration</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_hat</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">icqt</span><span class="p">(</span><span class="n">C</span><span class="o">=</span><span class="n">C</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<p>Or with a different hop length and frequency resolution:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hop_length</span> <span class="o">=</span> <span class="mi">256</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">bins_per_octave</span> <span class="o">=</span> <span class="mi">12</span> <span class="o">*</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">C</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">n_bins</span><span class="o">=</span><span class="mi">7</span><span class="o">*</span><span class="n">bins_per_octave</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">bins_per_octave</span><span class="o">=</span><span class="n">bins_per_octave</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_hat</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">icqt</span><span class="p">(</span><span class="n">C</span><span class="o">=</span><span class="n">C</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">bins_per_octave</span><span class="o">=</span><span class="n">bins_per_octave</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.ifgram">
<code class="descclassname">librosa.core.</code><code class="descname">ifgram</code><span class="sig-paren">(</span><em>y</em>, <em>sr=22050</em>, <em>n_fft=2048</em>, <em>hop_length=None</em>, <em>win_length=None</em>, <em>window='hann'</em>, <em>norm=False</em>, <em>center=True</em>, <em>ref_power=1e-06</em>, <em>clip=True</em>, <em>dtype=&lt;class 'numpy.complex64'&gt;</em>, <em>pad_mode='reflect'</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.ifgram" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the instantaneous frequency (as a proportion of the sampling rate)
obtained as the time-derivative of the phase of the complex spectrum as
described by <a href="#id35"><span class="problematic" id="id8">[1]_</span></a>.</p>
<p>Calculates regular STFT as a side effect.</p>
<table class="docutils footnote" frame="void" id="id9" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Abe, Toshihiko, Takao Kobayashi, and Satoshi Imai.
&#8220;Harmonics tracking and pitch extraction based on instantaneous
frequency.&#8221;
International Conference on Acoustics, Speech, and Signal Processing,
ICASSP-95., Vol. 1. IEEE, 1995.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>FFT window size</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>hop length, number samples between subsequent frames.
If not supplied, defaults to <cite>win_length / 4</cite>.</dd>
<dt>win_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0, &lt;= n_fft</span></dt>
<dd>Window length. Defaults to <cite>n_fft</cite>.
See <cite>stft</cite> for details.</dd>
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">string, tuple, number, function, or np.ndarray [shape=(n_fft,)]</span></dt>
<dd><ul class="first simple">
<li>a window specification (string, tuple, number);
see <cite>scipy.signal.get_window</cite></li>
<li>a window function, such as <cite>scipy.signal.hanning</cite></li>
<li>a user-specified window vector of length <cite>n_fft</cite></li>
</ul>
<p class="last">See <cite>stft</cite> for details.</p>
</dd>
<dt>norm <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Normalize the STFT.</dd>
<dt>center <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><ul class="first last simple">
<li><dl class="first docutils">
<dt>If <cite>True</cite>, the signal <cite>y</cite> is padded so that frame</dt>
<dd><cite>D[:, t]</cite> (and <cite>if_gram</cite>) is centered at <cite>y[t * hop_length]</cite>.</dd>
</dl>
</li>
<li>If <cite>False</cite>, then <cite>D[:, t]</cite> at <cite>y[t * hop_length]</cite></li>
</ul>
</dd>
<dt>ref_power <span class="classifier-delimiter">:</span> <span class="classifier">float &gt;= 0 or callable</span></dt>
<dd><p class="first">Minimum power threshold for estimating instantaneous frequency.
Any bin with <cite>np.abs(D[f, t])**2 &lt; ref_power</cite> will receive the
default frequency estimate.</p>
<p class="last">If callable, the threshold is set to <cite>ref_power(np.abs(D)**2)</cite>.</p>
</dd>
<dt>clip <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><ul class="first last simple">
<li>If <cite>True</cite>, clip estimated frequencies to the range <cite>[0, 0.5 * sr]</cite>.</li>
<li>If <cite>False</cite>, estimated frequencies can be negative or exceed
<cite>0.5 * sr</cite>.</li>
</ul>
</dd>
<dt>dtype <span class="classifier-delimiter">:</span> <span class="classifier">numeric type</span></dt>
<dd>Complex numeric type for <cite>D</cite>.  Default is 64-bit complex.</dd>
<dt>mode <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>If <cite>center=True</cite>, the padding mode to use at the edges of the signal.
By default, STFT uses reflection padding.</dd>
</dl>
<dl class="docutils">
<dt>if_gram <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(1 + n_fft/2, t), dtype=real]</span></dt>
<dd>Instantaneous frequency spectrogram:
<cite>if_gram[f, t]</cite> is the frequency at bin <cite>f</cite>, time <cite>t</cite></dd>
<dt>D <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(1 + n_fft/2, t), dtype=complex]</span></dt>
<dd>Short-time Fourier transform</dd>
</dl>
<p>stft : Short-time Fourier Transform</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frequencies</span><span class="p">,</span> <span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">ifgram</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">frequencies</span>
<span class="go">array([[  0.000e+00,   0.000e+00, ...,   0.000e+00,   0.000e+00],</span>
<span class="go">       [  3.150e+01,   3.070e+01, ...,   1.077e+01,   1.077e+01],</span>
<span class="go">       ...,</span>
<span class="go">       [  1.101e+04,   1.101e+04, ...,   1.101e+04,   1.101e+04],</span>
<span class="go">       [  1.102e+04,   1.102e+04, ...,   1.102e+04,   1.102e+04]])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.iirt">
<code class="descclassname">librosa.core.</code><code class="descname">iirt</code><span class="sig-paren">(</span><em>y</em>, <em>sr=22050</em>, <em>win_length=2048</em>, <em>hop_length=None</em>, <em>center=True</em>, <em>tuning=0.0</em>, <em>pad_mode='reflect'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.iirt" title="Permalink to this definition">¶</a></dt>
<dd><p>Time-frequency representation using IIR filters <a href="#id36"><span class="problematic" id="id10">[1]_</span></a>.</p>
<p>This function will return a time-frequency representation
using a multirate filter bank consisting of IIR filters.
First, <cite>y</cite> is resampled as needed according to the provided <cite>sample_rates</cite>.
Then, a filterbank with with <cite>n</cite> band-pass filters is designed.
The resampled input signals are processed by the filterbank as a whole.
(<cite>scipy.signal.filtfilt</cite> is used to make the phase linear.)
The output of the filterbank is cut into frames.
For each band, the short-time mean-square power (STMSP) is calculated by
summing <cite>win_length</cite> subsequent filtered time samples.</p>
<p>When called with the default set of parameters, it will generate the TF-representation
as described in <a href="#id37"><span class="problematic" id="id11">[1]_</span></a> (pitch filterbank):</p>
<blockquote>
<div><ul class="simple">
<li>85 filters with MIDI pitches [24, 108] as <cite>center_freqs</cite>.</li>
<li>each filter having a bandwith of one semitone.</li>
</ul>
</div></blockquote>
<table class="docutils footnote" frame="void" id="id12" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Müller, Meinard.
&#8220;Information Retrieval for Music and Motion.&#8221;
Springer Verlag. 2007.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>win_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0, &lt;= n_fft</span></dt>
<dd>Window length.</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>Hop length, number samples between subsequent frames.
If not supplied, defaults to <cite>win_length / 4</cite>.</dd>
<dt>center <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><ul class="first last simple">
<li>If <cite>True</cite>, the signal <cite>y</cite> is padded so that frame
<cite>D[:, t]</cite> is centered at <cite>y[t * hop_length]</cite>.</li>
<li>If <cite>False</cite>, then <cite>D[:, t]</cite> begins at <cite>y[t * hop_length]</cite></li>
</ul>
</dd>
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">float in <cite>[-0.5, +0.5)</cite> [scalar]</span></dt>
<dd>Tuning deviation from A440 in fractions of a bin.</dd>
<dt>pad_mode <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>If <cite>center=True</cite>, the padding mode to use at the edges of the signal.
By default, this function uses reflection padding.</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd>Additional arguments for <cite>librosa.filters.semitone_filterbank()</cite>
(e.g., could be used to provide another set of <cite>center_freqs</cite> and <cite>sample_rates</cite>).</dd>
</dl>
<dl class="docutils">
<dt>bands_power <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n, t), dtype=dtype]</span></dt>
<dd>Short-time mean-square power for the input signal.</dd>
</dl>
<p>librosa.filters.semitone_filterbank
librosa.filters._multirate_fb
librosa.filters.mr_frequencies
librosa.core.cqt
scipy.signal.filtfilt</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">iirt</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;cqt_hz&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Semitone spectrogram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%+2.0f</span><span class="s1"> dB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.interp_harmonics">
<code class="descclassname">librosa.core.</code><code class="descname">interp_harmonics</code><span class="sig-paren">(</span><em>x</em>, <em>freqs</em>, <em>h_range</em>, <em>kind='linear'</em>, <em>fill_value=0</em>, <em>axis=0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.interp_harmonics" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the energy at harmonics of time-frequency representation.</p>
<p>Given a frequency-based energy representation such as a spectrogram
or tempogram, this function computes the energy at the chosen harmonics
of the frequency axis.  (See examples below.)
The resulting harmonic array can then be used as input to a salience
computation.</p>
<dl class="docutils">
<dt>x <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>The input energy</dd>
<dt>freqs <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(X.shape[axis])</span></dt>
<dd>The frequency values corresponding to X&#8217;s elements along the
chosen axis.</dd>
<dt>h_range <span class="classifier-delimiter">:</span> <span class="classifier">list-like, non-negative</span></dt>
<dd>Harmonics to compute.  The first harmonic (1) corresponds to <cite>x</cite>
itself.
Values less than one (e.g., 1/2) correspond to sub-harmonics.</dd>
<dt>kind <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Interpolation type.  See <cite>scipy.interpolate.interp1d</cite>.</dd>
<dt>fill_value <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The value to fill when extrapolating beyond the observed
frequency range.</dd>
<dt>axis <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The axis along which to compute harmonics</dd>
</dl>
<dl class="docutils">
<dt>x_harm <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(len(h_range), [x.shape])</span></dt>
<dd><cite>x_harm[i]</cite> will have the same shape as <cite>x</cite>, and measure
the energy at the <cite>h_range[i]</cite> harmonic of each frequency.</dd>
</dl>
<p>scipy.interpolate.interp1d</p>
<p>Estimate the harmonics of a time-averaged tempogram</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">(),</span>
<span class="gp">... </span>                     <span class="n">duration</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Compute the time-varying tempogram and average over time</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">tempogram</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">),</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># We&#39;ll measure the first five harmonics</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h_range</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f_tempo</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">tempo_frequencies</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">tempi</span><span class="p">),</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Build the harmonic tensor</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">t_harmonics</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">interp_harmonics</span><span class="p">(</span><span class="n">tempi</span><span class="p">,</span> <span class="n">f_tempo</span><span class="p">,</span> <span class="n">h_range</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">t_harmonics</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(5, 384)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># And plot the results</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">t_harmonics</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;tempo&#39;</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">(</span><span class="mf">0.5</span> <span class="o">+</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">h_range</span><span class="p">)),</span>
<span class="gp">... </span>           <span class="p">[</span><span class="s1">&#39;</span><span class="si">{:.3g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">_</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">h_range</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Harmonic&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Tempo (BPM)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<p>We can also compute frequency harmonics for spectrograms.
To calculate sub-harmonic energy, use values &lt; 1.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">h_range</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fft_freqs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">fft_frequencies</span><span class="p">(</span><span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S_harm</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">interp_harmonics</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">fft_freqs</span><span class="p">,</span> <span class="n">h_range</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">S_harm</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(6, 1025, 646)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">_sh</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">S_harm</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
<span class="gp">... </span>    <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">_sh</span><span class="p">,</span>
<span class="gp">... </span>                                                     <span class="n">ref</span><span class="o">=</span><span class="n">S</span><span class="o">.</span><span class="n">max</span><span class="p">()),</span>
<span class="gp">... </span>                             <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;h=</span><span class="si">{:.3g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">h_range</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
<span class="gp">... </span>    <span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.istft">
<code class="descclassname">librosa.core.</code><code class="descname">istft</code><span class="sig-paren">(</span><em>stft_matrix</em>, <em>hop_length=None</em>, <em>win_length=None</em>, <em>window='hann'</em>, <em>center=True</em>, <em>dtype=&lt;class 'numpy.float32'&gt;</em>, <em>length=None</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.istft" title="Permalink to this definition">¶</a></dt>
<dd><p>Inverse short-time Fourier transform (ISTFT).</p>
<p>Converts a complex-valued spectrogram <cite>stft_matrix</cite> to time-series <cite>y</cite>
by minimizing the mean squared error between <cite>stft_matrix</cite> and STFT of
<cite>y</cite> as described in <a href="#id38"><span class="problematic" id="id13">[1]_</span></a>.</p>
<p>In general, window function, hop length and other parameters should be same
as in stft, which mostly leads to perfect reconstruction of a signal from
unmodified <cite>stft_matrix</cite>.</p>
<table class="docutils footnote" frame="void" id="id14" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>D. W. Griffin and J. S. Lim,
&#8220;Signal estimation from modified short-time Fourier transform,&#8221;
IEEE Trans. ASSP, vol.32, no.2, pp.236–243, Apr. 1984.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>stft_matrix <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(1 + n_fft/2, t)]</span></dt>
<dd>STFT matrix from <cite>stft</cite></dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>Number of frames between STFT columns.
If unspecified, defaults to <cite>win_length / 4</cite>.</dd>
<dt>win_length <span class="classifier-delimiter">:</span> <span class="classifier">int &lt;= n_fft = 2 * (stft_matrix.shape[0] - 1)</span></dt>
<dd><p class="first">When reconstructing the time series, each frame is windowed
and each sample is normalized by the sum of squared window
according to the <cite>window</cite> function (see below).</p>
<p class="last">If unspecified, defaults to <cite>n_fft</cite>.</p>
</dd>
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">string, tuple, number, function, np.ndarray [shape=(n_fft,)]</span></dt>
<dd><ul class="first last simple">
<li>a window specification (string, tuple, or number);
see <cite>scipy.signal.get_window</cite></li>
<li>a window function, such as <cite>scipy.signal.hanning</cite></li>
<li>a user-specified window vector of length <cite>n_fft</cite></li>
</ul>
</dd>
<dt>center <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><ul class="first last simple">
<li>If <cite>True</cite>, <cite>D</cite> is assumed to have centered frames.</li>
<li>If <cite>False</cite>, <cite>D</cite> is assumed to have left-aligned frames.</li>
</ul>
</dd>
<dt>dtype <span class="classifier-delimiter">:</span> <span class="classifier">numeric type</span></dt>
<dd>Real numeric type for <cite>y</cite>.  Default is 32-bit float.</dd>
<dt>length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0, optional</span></dt>
<dd>If provided, the output <cite>y</cite> is zero-padded or clipped to exactly
<cite>length</cite> samples.</dd>
</dl>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>time domain signal reconstructed from <cite>stft_matrix</cite></dd>
</dl>
<p>stft : Short-time Fourier Transform</p>
<p>This function caches at level 30.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_hat</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">istft</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_hat</span>
<span class="go">array([ -4.812e-06,  -4.267e-06, ...,   6.271e-06,   2.827e-07], dtype=float32)</span>
</pre></div>
</div>
<p>Exactly preserving length of the input signal requires explicit padding.
Otherwise, a partial frame at the end of <cite>y</cite> will not be represented.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">n_fft</span> <span class="o">=</span> <span class="mi">2048</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_pad</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">fix_length</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="n">n_fft</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y_pad</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="n">n_fft</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_out</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">istft</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="n">y_out</span><span class="p">))</span>
<span class="go">1.4901161e-07</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.load">
<code class="descclassname">librosa.core.</code><code class="descname">load</code><span class="sig-paren">(</span><em>path</em>, <em>sr=22050</em>, <em>mono=True</em>, <em>offset=0.0</em>, <em>duration=None</em>, <em>dtype=&lt;class 'numpy.float32'&gt;</em>, <em>res_type='kaiser_best'</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.load" title="Permalink to this definition">¶</a></dt>
<dd><p>Load an audio file as a floating point time series.</p>
<p>Audio will be automatically resampled to the given rate
(default <cite>sr=22050</cite>).</p>
<p>To preserve the native sampling rate of the file, use <cite>sr=None</cite>.</p>
<dl class="docutils">
<dt>path <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first">path to the input file.</p>
<p class="last">Any format supported by <cite>audioread</cite> will work.</p>
</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd><p class="first">target sampling rate</p>
<p class="last">&#8216;None&#8217; uses the native sampling rate</p>
</dd>
<dt>mono <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>convert signal to mono</dd>
<dt>offset <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>start reading after this time (in seconds)</dd>
<dt>duration <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>only load up to this much audio (in seconds)</dd>
<dt>dtype <span class="classifier-delimiter">:</span> <span class="classifier">numeric type</span></dt>
<dd>data type of <cite>y</cite></dd>
<dt>res_type <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first">resample type (see note)</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p>By default, this uses <cite>resampy</cite>&#8216;s high-quality mode (&#8216;kaiser_best&#8217;).</p>
<p>To use a faster method, set <cite>res_type=&#8217;kaiser_fast&#8217;</cite>.</p>
<p class="last">To use <cite>scipy.signal.resample</cite>, set <cite>res_type=&#8217;scipy&#8217;</cite>.</p>
</div>
</dd>
</dl>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,) or (2, n)]</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load a wav file</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<span class="go">array([ -4.756e-06,  -6.020e-06, ...,  -1.040e-06,   0.000e+00], dtype=float32)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sr</span>
<span class="go">22050</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load a wav file and resample to 11 KHz</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="mi">11025</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<span class="go">array([ -2.077e-06,  -2.928e-06, ...,  -4.395e-06,   0.000e+00], dtype=float32)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sr</span>
<span class="go">11025</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Load 5 seconds of a wav file, starting 15 seconds in</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">filename</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">15.0</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<span class="go">array([ 0.069,  0.1  , ..., -0.101,  0.   ], dtype=float32)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sr</span>
<span class="go">22050</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.magphase">
<code class="descclassname">librosa.core.</code><code class="descname">magphase</code><span class="sig-paren">(</span><em>D</em>, <em>power=1</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.magphase" title="Permalink to this definition">¶</a></dt>
<dd><p>Separate a complex-valued spectrogram D into its magnitude (S)
and phase (P) components, so that <cite>D = S * P</cite>.</p>
<dl class="docutils">
<dt>D <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t), dtype=complex]</span></dt>
<dd>complex-valued spectrogram</dd>
<dt>power <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd>Exponent for the magnitude spectrogram,
e.g., 1 for energy, 2 for power, etc.</dd>
</dl>
<dl class="docutils">
<dt>D_mag <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t), dtype=real]</span></dt>
<dd>magnitude of <cite>D</cite>, raised to <cite>power</cite></dd>
<dt>D_phase <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t), dtype=complex]</span></dt>
<dd><cite>exp(1.j * phi)</cite> where <cite>phi</cite> is the phase of <cite>D</cite></dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">magnitude</span><span class="p">,</span> <span class="n">phase</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">magphase</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">magnitude</span>
<span class="go">array([[  2.524e-03,   4.329e-02, ...,   3.217e-04,   3.520e-05],</span>
<span class="go">       [  2.645e-03,   5.152e-02, ...,   3.283e-04,   3.432e-04],</span>
<span class="go">       ...,</span>
<span class="go">       [  1.966e-05,   9.828e-06, ...,   3.164e-07,   9.370e-06],</span>
<span class="go">       [  1.966e-05,   9.830e-06, ...,   3.161e-07,   9.366e-06]], dtype=float32)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">phase</span>
<span class="go">array([[  1.000e+00 +0.000e+00j,   1.000e+00 +0.000e+00j, ...,</span>
<span class="go">         -1.000e+00 +8.742e-08j,  -1.000e+00 +8.742e-08j],</span>
<span class="go">       [  1.000e+00 +1.615e-16j,   9.950e-01 -1.001e-01j, ...,</span>
<span class="go">          9.794e-01 +2.017e-01j,   1.492e-02 -9.999e-01j],</span>
<span class="go">       ...,</span>
<span class="go">       [  1.000e+00 -5.609e-15j,  -5.081e-04 +1.000e+00j, ...,</span>
<span class="go">         -9.549e-01 -2.970e-01j,   2.938e-01 -9.559e-01j],</span>
<span class="go">       [ -1.000e+00 +8.742e-08j,  -1.000e+00 +8.742e-08j, ...,</span>
<span class="go">         -1.000e+00 +8.742e-08j,  -1.000e+00 +8.742e-08j]], dtype=complex64)</span>
</pre></div>
</div>
<p>Or get the phase angle (in radians)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">angle</span><span class="p">(</span><span class="n">phase</span><span class="p">)</span>
<span class="go">array([[  0.000e+00,   0.000e+00, ...,   3.142e+00,   3.142e+00],</span>
<span class="go">       [  1.615e-16,  -1.003e-01, ...,   2.031e-01,  -1.556e+00],</span>
<span class="go">       ...,</span>
<span class="go">       [ -5.609e-15,   1.571e+00, ...,  -2.840e+00,  -1.273e+00],</span>
<span class="go">       [  3.142e+00,   3.142e+00, ...,   3.142e+00,   3.142e+00]], dtype=float32)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.mel_frequencies">
<code class="descclassname">librosa.core.</code><code class="descname">mel_frequencies</code><span class="sig-paren">(</span><em>n_mels=128</em>, <em>fmin=0.0</em>, <em>fmax=11025.0</em>, <em>htk=False</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.mel_frequencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the center frequencies of mel bands.</p>
<dl class="docutils">
<dt>n_mels <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number of Mel bins</dd>
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt;= 0 [scalar]</span></dt>
<dd>minimum frequency (Hz)</dd>
<dt>fmax <span class="classifier-delimiter">:</span> <span class="classifier">float &gt;= 0 [scalar]</span></dt>
<dd>maximum frequency (Hz)</dd>
<dt>htk <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>use HTK formula instead of Slaney</dd>
</dl>
<dl class="docutils">
<dt>bin_frequencies <span class="classifier-delimiter">:</span> <span class="classifier">ndarray [shape=(n_mels,)]</span></dt>
<dd>vector of n_mels frequencies in Hz which are uniformly spaced on the Mel
axis.</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">mel_frequencies</span><span class="p">(</span><span class="n">n_mels</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="go">array([     0.   ,     85.317,    170.635,    255.952,</span>
<span class="go">          341.269,    426.586,    511.904,    597.221,</span>
<span class="go">          682.538,    767.855,    853.173,    938.49 ,</span>
<span class="go">         1024.856,   1119.114,   1222.042,   1334.436,</span>
<span class="go">         1457.167,   1591.187,   1737.532,   1897.337,</span>
<span class="go">         2071.84 ,   2262.393,   2470.47 ,   2697.686,</span>
<span class="go">         2945.799,   3216.731,   3512.582,   3835.643,</span>
<span class="go">         4188.417,   4573.636,   4994.285,   5453.621,</span>
<span class="go">         5955.205,   6502.92 ,   7101.009,   7754.107,</span>
<span class="go">         8467.272,   9246.028,  10096.408,  11025.   ])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.mel_to_hz">
<code class="descclassname">librosa.core.</code><code class="descname">mel_to_hz</code><span class="sig-paren">(</span><em>mels</em>, <em>htk=False</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.mel_to_hz" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert mel bin numbers to frequencies</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">mel_to_hz</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="go">200.</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">mel_to_hz</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="go">array([  66.667,  133.333,  200.   ,  266.667,  333.333])</span>
</pre></div>
</div>
<dl class="docutils">
<dt>mels <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)], float</span></dt>
<dd>mel bins to convert</dd>
<dt>htk <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>use HTK formula instead of Slaney</dd>
</dl>
<dl class="docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>input mels in Hz</dd>
</dl>
<p>hz_to_mel</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.midi_to_hz">
<code class="descclassname">librosa.core.</code><code class="descname">midi_to_hz</code><span class="sig-paren">(</span><em>notes</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.midi_to_hz" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the frequency (Hz) of MIDI note(s)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_hz</span><span class="p">(</span><span class="mi">36</span><span class="p">)</span>
<span class="go">65.406</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_hz</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="mi">48</span><span class="p">))</span>
<span class="go">array([  65.406,   69.296,   73.416,   77.782,   82.407,</span>
<span class="go">         87.307,   92.499,   97.999,  103.826,  110.   ,</span>
<span class="go">        116.541,  123.471])</span>
</pre></div>
</div>
<dl class="docutils">
<dt>notes <span class="classifier-delimiter">:</span> <span class="classifier">int or np.ndarray [shape=(n,), dtype=int]</span></dt>
<dd>midi number(s) of the note(s)</dd>
</dl>
<dl class="docutils">
<dt>frequency <span class="classifier-delimiter">:</span> <span class="classifier">number or np.ndarray [shape=(n,), dtype=float]</span></dt>
<dd>frequency (frequencies) of <cite>notes</cite> in Hz</dd>
</dl>
<p>hz_to_midi
note_to_hz</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.midi_to_note">
<code class="descclassname">librosa.core.</code><code class="descname">midi_to_note</code><span class="sig-paren">(</span><em>midi</em>, <em>octave=True</em>, <em>cents=False</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.midi_to_note" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert one or more MIDI numbers to note strings.</p>
<p>MIDI numbers will be rounded to the nearest integer.</p>
<p>Notes will be of the format &#8216;C0&#8217;, &#8216;C#0&#8217;, &#8216;D0&#8217;, ...</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_note</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="go">&#39;C-1&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_note</span><span class="p">(</span><span class="mi">37</span><span class="p">)</span>
<span class="go">&#39;C#2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_note</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;A#-2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_note</span><span class="p">(</span><span class="mf">104.7</span><span class="p">)</span>
<span class="go">&#39;A7&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_note</span><span class="p">(</span><span class="mf">104.7</span><span class="p">,</span> <span class="n">cents</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="go">&#39;A7-30&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">midi_to_note</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">)))</span>
<span class="go">[&#39;C0&#39;, &#39;C#0&#39;, &#39;D0&#39;, &#39;D#0&#39;, &#39;E0&#39;, &#39;F0&#39;, &#39;F#0&#39;, &#39;G0&#39;, &#39;G#0&#39;, &#39;A0&#39;, &#39;A#0&#39;, &#39;B0&#39;]</span>
</pre></div>
</div>
<dl class="docutils">
<dt>midi <span class="classifier-delimiter">:</span> <span class="classifier">int or iterable of int</span></dt>
<dd>Midi numbers to convert.</dd>
<dt>octave: bool</dt>
<dd>If True, include the octave number</dd>
<dt>cents: bool</dt>
<dd>If true, cent markers will be appended for fractional notes.
Eg, <cite>midi_to_note(69.3, cents=True)</cite> == <cite>A4+03</cite></dd>
</dl>
<dl class="docutils">
<dt>notes <span class="classifier-delimiter">:</span> <span class="classifier">str or iterable of str</span></dt>
<dd>Strings describing each midi note.</dd>
</dl>
<dl class="docutils">
<dt>ParameterError</dt>
<dd>if <cite>cents</cite> is True and <cite>octave</cite> is False</dd>
</dl>
<p>midi_to_hz
note_to_midi
hz_to_note</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.note_to_hz">
<code class="descclassname">librosa.core.</code><code class="descname">note_to_hz</code><span class="sig-paren">(</span><em>note</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.note_to_hz" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert one or more note names to frequency (Hz)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get the frequency of a note</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
<span class="go">array([ 16.352])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or multiple notes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">([</span><span class="s1">&#39;A3&#39;</span><span class="p">,</span> <span class="s1">&#39;A4&#39;</span><span class="p">,</span> <span class="s1">&#39;A5&#39;</span><span class="p">])</span>
<span class="go">array([ 220.,  440.,  880.])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or notes with tuning deviations</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">(</span><span class="s1">&#39;C2-32&#39;</span><span class="p">,</span> <span class="n">round_midi</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="go">array([ 64.209])</span>
</pre></div>
</div>
<dl class="docutils">
<dt>note <span class="classifier-delimiter">:</span> <span class="classifier">str or iterable of str</span></dt>
<dd>One or more note names to convert</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd>Additional parameters to <cite>note_to_midi</cite></dd>
</dl>
<dl class="docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">number or np.ndarray [shape=(len(note),)]</span></dt>
<dd>Array of frequencies (in Hz) corresponding to <cite>note</cite></dd>
</dl>
<p>midi_to_hz
note_to_midi
hz_to_note</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.note_to_midi">
<code class="descclassname">librosa.core.</code><code class="descname">note_to_midi</code><span class="sig-paren">(</span><em>note</em>, <em>round_midi=True</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.note_to_midi" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert one or more spelled notes to MIDI number(s).</p>
<p>Notes may be spelled out with optional accidentals or octave numbers.</p>
<p>The leading note name is case-insensitive.</p>
<p>Sharps are indicated with <code class="docutils literal"><span class="pre">#</span></code>, flats may be indicated with <code class="docutils literal"><span class="pre">!</span></code> or <code class="docutils literal"><span class="pre">b</span></code>.</p>
<dl class="docutils">
<dt>note <span class="classifier-delimiter">:</span> <span class="classifier">str or iterable of str</span></dt>
<dd>One or more note names.</dd>
<dt>round_midi <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><ul class="first last simple">
<li>If <cite>True</cite>, allow for fractional midi notes</li>
<li>Otherwise, round cent deviations to the nearest note</li>
</ul>
</dd>
</dl>
<dl class="docutils">
<dt>midi <span class="classifier-delimiter">:</span> <span class="classifier">float or np.array</span></dt>
<dd>Midi note numbers corresponding to inputs.</dd>
</dl>
<dl class="docutils">
<dt>ParameterError</dt>
<dd>If the input is not in valid note format</dd>
</dl>
<p>midi_to_note
note_to_hz</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">)</span>
<span class="go">12</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">(</span><span class="s1">&#39;C#3&#39;</span><span class="p">)</span>
<span class="go">49</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">(</span><span class="s1">&#39;f4&#39;</span><span class="p">)</span>
<span class="go">65</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">(</span><span class="s1">&#39;Bb-1&#39;</span><span class="p">)</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">(</span><span class="s1">&#39;A!8&#39;</span><span class="p">)</span>
<span class="go">116</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Lists of notes also work</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_midi</span><span class="p">([</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">])</span>
<span class="go">array([12, 16, 19])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.octs_to_hz">
<code class="descclassname">librosa.core.</code><code class="descname">octs_to_hz</code><span class="sig-paren">(</span><em>octs</em>, <em>A440=440.0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.octs_to_hz" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert octaves numbers to frequencies.</p>
<p>Octaves are counted relative to A.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">octs_to_hz</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">55.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">octs_to_hz</span><span class="p">([</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="go">array([   6.875,   13.75 ,   27.5  ,   55.   ,  110.   ])</span>
</pre></div>
</div>
<dl class="docutils">
<dt>octaves <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or float</span></dt>
<dd>octave number for each frequency</dd>
<dt>A440 <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>frequency of A440</dd>
</dl>
<dl class="docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">number or np.ndarray [shape=(n,)]</span></dt>
<dd>scalar or vector of frequencies</dd>
</dl>
<p>hz_to_octs</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.perceptual_weighting">
<code class="descclassname">librosa.core.</code><code class="descname">perceptual_weighting</code><span class="sig-paren">(</span><em>S</em>, <em>frequencies</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.perceptual_weighting" title="Permalink to this definition">¶</a></dt>
<dd><p>Perceptual weighting of a power spectrogram:</p>
<p><cite>S_p[f] = A_weighting(f) + 10*log(S[f] / ref)</cite></p>
<dl class="docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)]</span></dt>
<dd>Power spectrogram</dd>
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d,)]</span></dt>
<dd>Center frequency for each row of <cite>S</cite></dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd>Additional keyword arguments to <cite>power_to_db</cite>.</dd>
</dl>
<dl class="docutils">
<dt>S_p <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)]</span></dt>
<dd>perceptually weighted version of <cite>S</cite></dd>
</dl>
<p>power_to_db</p>
<p>This function caches at level 30.</p>
<p>Re-weight a CQT power spectrum, using peak power as reference</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">CQT</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">fmin</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">(</span><span class="s1">&#39;A1&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt_frequencies</span><span class="p">(</span><span class="n">CQT</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
<span class="gp">... </span>                                <span class="n">fmin</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">(</span><span class="s1">&#39;A1&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">perceptual_CQT</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">perceptual_weighting</span><span class="p">(</span><span class="n">CQT</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span>
<span class="gp">... </span>                                              <span class="n">freqs</span><span class="p">,</span>
<span class="gp">... </span>                                              <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">perceptual_CQT</span>
<span class="go">array([[ -80.076,  -80.049, ..., -104.735, -104.735],</span>
<span class="go">       [ -78.344,  -78.555, ..., -103.725, -103.725],</span>
<span class="go">       ...,</span>
<span class="go">       [ -76.272,  -76.272, ...,  -76.272,  -76.272],</span>
<span class="go">       [ -76.485,  -76.485, ...,  -76.485,  -76.485]])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">CQT</span><span class="p">,</span>
<span class="gp">... </span>                                                 <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">fmin</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">(</span><span class="s1">&#39;A1&#39;</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;cqt_hz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Log CQT power&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%+2.0f</span><span class="s1"> dB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">perceptual_CQT</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;cqt_hz&#39;</span><span class="p">,</span>
<span class="gp">... </span>                         <span class="n">fmin</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">note_to_hz</span><span class="p">(</span><span class="s1">&#39;A1&#39;</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Perceptually weighted log CQT&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%+2.0f</span><span class="s1"> dB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.phase_vocoder">
<code class="descclassname">librosa.core.</code><code class="descname">phase_vocoder</code><span class="sig-paren">(</span><em>D</em>, <em>rate</em>, <em>hop_length=None</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.phase_vocoder" title="Permalink to this definition">¶</a></dt>
<dd><p>Phase vocoder.  Given an STFT matrix D, speed up by a factor of <cite>rate</cite></p>
<p>Based on the implementation provided by <a href="#id39"><span class="problematic" id="id15">[1]_</span></a>.</p>
<table class="docutils footnote" frame="void" id="id16" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Ellis, D. P. W. &#8220;A phase vocoder in Matlab.&#8221;
Columbia University, 2002.
<a class="reference external" href="http://www.ee.columbia.edu/~dpwe/resources/matlab/pvoc/">http://www.ee.columbia.edu/~dpwe/resources/matlab/pvoc/</a></td></tr>
</tbody>
</table>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Play at double speed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">2048</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D_fast</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">phase_vocoder</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_fast</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">istft</span><span class="p">(</span><span class="n">D_fast</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or play at 1/3 speed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span>   <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span>       <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">2048</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D_slow</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">phase_vocoder</span><span class="p">(</span><span class="n">D</span><span class="p">,</span> <span class="mf">1.</span><span class="o">/</span><span class="mi">3</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_slow</span>  <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">istft</span><span class="p">(</span><span class="n">D_slow</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
</pre></div>
</div>
<dl class="docutils">
<dt>D <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t), dtype=complex]</span></dt>
<dd>STFT matrix</dd>
<dt>rate <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>Speed-up factor: <cite>rate &gt; 1</cite> is faster, <cite>rate &lt; 1</cite> is slower.</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar] or None</span></dt>
<dd><p class="first">The number of samples between successive columns of <cite>D</cite>.</p>
<p class="last">If None, defaults to <cite>n_fft/4 = (D.shape[0]-1)/2</cite></p>
</dd>
</dl>
<dl class="docutils">
<dt>D_stretched <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t / rate), dtype=complex]</span></dt>
<dd>time-stretched STFT</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="librosa.core.piptrack">
<code class="descclassname">librosa.core.</code><code class="descname">piptrack</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_fft=2048</em>, <em>hop_length=None</em>, <em>fmin=150.0</em>, <em>fmax=4000.0</em>, <em>threshold=0.1</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.piptrack" title="Permalink to this definition">¶</a></dt>
<dd><p>Pitch tracking on thresholded parabolically-interpolated STFT</p>
<table class="docutils footnote" frame="void" id="id17" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td><a class="reference external" href="https://ccrma.stanford.edu/~jos/sasp/Sinusoidal_Peak_Interpolation.html">https://ccrma.stanford.edu/~jos/sasp/Sinusoidal_Peak_Interpolation.html</a></td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y: np.ndarray [shape=(n,)] or None</dt>
<dd>audio signal</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>audio sampling rate of <cite>y</cite></dd>
<dt>S: np.ndarray [shape=(d, t)] or None</dt>
<dd>magnitude or power spectrogram</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar] or None</span></dt>
<dd>number of FFT bins to use, if <cite>y</cite> is provided.</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar] or None</span></dt>
<dd>number of samples to hop</dd>
<dt>threshold <span class="classifier-delimiter">:</span> <span class="classifier">float in <cite>(0, 1)</cite></span></dt>
<dd>A bin in spectrum X is considered a pitch when it is greater than
<cite>threshold*X.max()</cite></dd>
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>lower frequency cutoff.</dd>
<dt>fmax <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>upper frequency cutoff.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>One of <cite>S</cite> or <cite>y</cite> must be provided.</p>
<p class="last">If <cite>S</cite> is not given, it is computed from <cite>y</cite> using
the default parameters of <cite>librosa.core.stft</cite>.</p>
</div>
<p>pitches : np.ndarray [shape=(d, t)]
magnitudes : np.ndarray [shape=(d,t)]</p>
<blockquote>
<div><p>Where <cite>d</cite> is the subset of FFT bins within <cite>fmin</cite> and <cite>fmax</cite>.</p>
<p><cite>pitches[f, t]</cite> contains instantaneous frequency at bin
<cite>f</cite>, time <cite>t</cite></p>
<p><cite>magnitudes[f, t]</cite> contains the corresponding magnitudes.</p>
<p>Both <cite>pitches</cite> and <cite>magnitudes</cite> take value 0 at bins
of non-maximal magnitude.</p>
</div></blockquote>
<p>This function caches at level 30.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pitches</span><span class="p">,</span> <span class="n">magnitudes</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">piptrack</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.pitch_tuning">
<code class="descclassname">librosa.core.</code><code class="descname">pitch_tuning</code><span class="sig-paren">(</span><em>frequencies</em>, <em>resolution=0.01</em>, <em>bins_per_octave=12</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.pitch_tuning" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a collection of pitches, estimate its tuning offset
(in fractions of a bin) relative to A440=440.0Hz.</p>
<dl class="docutils">
<dt>frequencies <span class="classifier-delimiter">:</span> <span class="classifier">array-like, float</span></dt>
<dd>A collection of frequencies detected in the signal.
See <cite>piptrack</cite></dd>
<dt>resolution <span class="classifier-delimiter">:</span> <span class="classifier">float in <cite>(0, 1)</cite></span></dt>
<dd>Resolution of the tuning as a fraction of a bin.
0.01 corresponds to cents.</dd>
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>How many frequency bins per octave</dd>
</dl>
<dl class="docutils">
<dt>tuning: float in <cite>[-0.5, 0.5)</cite></dt>
<dd>estimated tuning deviation (fractions of a bin)</dd>
</dl>
<dl class="docutils">
<dt>estimate_tuning</dt>
<dd>Estimating tuning from time-series or spectrogram input</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Generate notes at +25 cents</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">cqt_frequencies</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="mi">55</span><span class="p">,</span> <span class="n">tuning</span><span class="o">=</span><span class="mf">0.25</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">pitch_tuning</span><span class="p">(</span><span class="n">freqs</span><span class="p">)</span>
<span class="go">0.25</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Track frequencies from a real spectrogram</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pitches</span><span class="p">,</span> <span class="n">magnitudes</span><span class="p">,</span> <span class="n">stft</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">ifptrack</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Select out pitches with high energy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">pitches</span> <span class="o">=</span> <span class="n">pitches</span><span class="p">[</span><span class="n">magnitudes</span> <span class="o">&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">(</span><span class="n">magnitudes</span><span class="p">)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">pitch_tuning</span><span class="p">(</span><span class="n">pitches</span><span class="p">)</span>
<span class="go">0.089999999999999969</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.power_to_db">
<code class="descclassname">librosa.core.</code><code class="descname">power_to_db</code><span class="sig-paren">(</span><em>S</em>, <em>ref=1.0</em>, <em>amin=1e-10</em>, <em>top_db=80.0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.power_to_db" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a power spectrogram (amplitude squared) to decibel (dB) units</p>
<p>This computes the scaling <code class="docutils literal"><span class="pre">10</span> <span class="pre">*</span> <span class="pre">log10(S</span> <span class="pre">/</span> <span class="pre">ref)</span></code> in a numerically
stable way.</p>
<dl class="docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>input power</dd>
<dt>ref <span class="classifier-delimiter">:</span> <span class="classifier">scalar or callable</span></dt>
<dd><p class="first">If scalar, the amplitude <cite>abs(S)</cite> is scaled relative to <cite>ref</cite>:
<cite>10 * log10(S / ref)</cite>.
Zeros in the output correspond to positions where <cite>S == ref</cite>.</p>
<p class="last">If callable, the reference value is computed as <cite>ref(S)</cite>.</p>
</dd>
<dt>amin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>minimum threshold for <cite>abs(S)</cite> and <cite>ref</cite></dd>
<dt>top_db <span class="classifier-delimiter">:</span> <span class="classifier">float &gt;= 0 [scalar]</span></dt>
<dd>threshold the output at <cite>top_db</cite> below the peak:
<code class="docutils literal"><span class="pre">max(10</span> <span class="pre">*</span> <span class="pre">log10(S))</span> <span class="pre">-</span> <span class="pre">top_db</span></code></dd>
</dl>
<dl class="docutils">
<dt>S_db <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd><code class="docutils literal"><span class="pre">S_db</span> <span class="pre">~=</span> <span class="pre">10</span> <span class="pre">*</span> <span class="pre">log10(S)</span> <span class="pre">-</span> <span class="pre">10</span> <span class="pre">*</span> <span class="pre">log10(ref)</span></code></dd>
</dl>
<p>perceptual_weighting
db_to_power
amplitude_to_db
db_to_amplitude</p>
<p>This function caches at level 30.</p>
<p>Get a power spectrogram from a waveform <code class="docutils literal"><span class="pre">y</span></code></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">power_to_db</span><span class="p">(</span><span class="n">S</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="go">array([[-33.293, -27.32 , ..., -33.293, -33.293],</span>
<span class="go">       [-33.293, -25.723, ..., -33.293, -33.293],</span>
<span class="go">       ...,</span>
<span class="go">       [-33.293, -33.293, ..., -33.293, -33.293],</span>
<span class="go">       [-33.293, -33.293, ..., -33.293, -33.293]], dtype=float32)</span>
</pre></div>
</div>
<p>Compute dB relative to peak power</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">power_to_db</span><span class="p">(</span><span class="n">S</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">)</span>
<span class="go">array([[-80.   , -74.027, ..., -80.   , -80.   ],</span>
<span class="go">       [-80.   , -72.431, ..., -80.   , -80.   ],</span>
<span class="go">       ...,</span>
<span class="go">       [-80.   , -80.   , ..., -80.   , -80.   ],</span>
<span class="go">       [-80.   , -80.   , ..., -80.   , -80.   ]], dtype=float32)</span>
</pre></div>
</div>
<p>Or compare to median power</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">power_to_db</span><span class="p">(</span><span class="n">S</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">)</span>
<span class="go">array([[-0.189,  5.784, ..., -0.189, -0.189],</span>
<span class="go">       [-0.189,  7.381, ..., -0.189, -0.189],</span>
<span class="go">       ...,</span>
<span class="go">       [-0.189, -0.189, ..., -0.189, -0.189],</span>
<span class="go">       [-0.189, -0.189, ..., -0.189, -0.189]], dtype=float32)</span>
</pre></div>
</div>
<p>And plot the results</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">S</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Power spectrogram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">power_to_db</span><span class="p">(</span><span class="n">S</span><span class="o">**</span><span class="mi">2</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%+2.0f</span><span class="s1"> dB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Log-Power spectrogram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.pseudo_cqt">
<code class="descclassname">librosa.core.</code><code class="descname">pseudo_cqt</code><span class="sig-paren">(</span><em>y</em>, <em>sr=22050</em>, <em>hop_length=512</em>, <em>fmin=None</em>, <em>n_bins=84</em>, <em>bins_per_octave=12</em>, <em>tuning=0.0</em>, <em>filter_scale=1</em>, <em>norm=1</em>, <em>sparsity=0.01</em>, <em>window='hann'</em>, <em>scale=True</em>, <em>pad_mode='reflect'</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.pseudo_cqt" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the pseudo constant-Q transform of an audio signal.</p>
<p>This uses a single fft size that is the smallest power of 2 that is greater
than or equal to the max of:</p>
<blockquote>
<div><ol class="arabic simple">
<li>The longest CQT filter</li>
<li>2x the hop_length</li>
</ol>
</div></blockquote>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number of samples between successive CQT columns.</dd>
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>Minimum frequency. Defaults to C1 ~= 32.70 Hz</dd>
<dt>n_bins <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>Number of frequency bins, starting at <cite>fmin</cite></dd>
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>Number of bins per octave</dd>
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">None or float in <cite>[-0.5, 0.5)</cite></span></dt>
<dd><p class="first">Tuning offset in fractions of a bin (cents).</p>
<p class="last">If <cite>None</cite>, tuning will be automatically estimated from the signal.</p>
</dd>
<dt>filter_scale <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd>Filter filter_scale factor. Larger values use longer windows.</dd>
<dt>sparsity <span class="classifier-delimiter">:</span> <span class="classifier">float in [0, 1)</span></dt>
<dd><p class="first">Sparsify the CQT basis by discarding up to <cite>sparsity</cite>
fraction of the energy in each basis.</p>
<p class="last">Set <cite>sparsity=0</cite> to disable sparsification.</p>
</dd>
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">str, tuple, number, or function</span></dt>
<dd>Window specification for the basis filters.
See <cite>filters.get_window</cite> for details.</dd>
<dt>pad_mode <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd><p class="first">Padding mode for centered frame analysis.</p>
<p class="last">See also: <cite>librosa.core.stft</cite> and <cite>np.pad</cite>.</p>
</dd>
</dl>
<dl class="docutils">
<dt>CQT <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n_bins, t), dtype=np.float]</span></dt>
<dd>Pseudo Constant-Q energy for each frequency at each time.</dd>
</dl>
<dl class="docutils">
<dt>ParameterError</dt>
<dd><p class="first">If <cite>hop_length</cite> is not an integer multiple of
<cite>2**(n_bins / bins_per_octave)</cite></p>
<p class="last">Or if <cite>y</cite> is too short to support the frequency range of the CQT.</p>
</dd>
</dl>
<p>This function caches at level 20.</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.resample">
<code class="descclassname">librosa.core.</code><code class="descname">resample</code><span class="sig-paren">(</span><em>y</em>, <em>orig_sr</em>, <em>target_sr</em>, <em>res_type='kaiser_best'</em>, <em>fix=True</em>, <em>scale=False</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.resample" title="Permalink to this definition">¶</a></dt>
<dd><p>Resample a time series from orig_sr to target_sr</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,) or shape=(2, n)]</span></dt>
<dd>audio time series.  Can be mono or stereo.</dd>
<dt>orig_sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>original sampling rate of <cite>y</cite></dd>
<dt>target_sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>target sampling rate</dd>
<dt>res_type <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd><p class="first">resample type (see note)</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p>By default, this uses <cite>resampy</cite>&#8216;s high-quality mode (&#8216;kaiser_best&#8217;).</p>
<p>To use a faster method, set <cite>res_type=&#8217;kaiser_fast&#8217;</cite>.</p>
<p class="last">To use <cite>scipy.signal.resample</cite>, set <cite>res_type=&#8217;scipy&#8217;</cite>.</p>
</div>
</dd>
<dt>fix <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>adjust the length of the resampled signal to be of size exactly
<cite>ceil(target_sr * len(y) / orig_sr)</cite></dd>
<dt>scale <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Scale the resampled signal so that <cite>y</cite> and <cite>y_hat</cite> have approximately
equal total energy.</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd>If <cite>fix==True</cite>, additional keyword arguments to pass to
<cite>librosa.util.fix_length</cite>.</dd>
</dl>
<dl class="docutils">
<dt>y_hat <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n * target_sr / orig_sr,)]</span></dt>
<dd><cite>y</cite> resampled from <cite>orig_sr</cite> to <cite>target_sr</cite></dd>
</dl>
<p>librosa.util.fix_length
scipy.signal.resample
resampy.resample</p>
<p>This function caches at level 20.</p>
<p>Downsample from 22 KHz to 8 KHz</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">(),</span> <span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_8k</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="mi">8000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="n">y_8k</span><span class="o">.</span><span class="n">shape</span>
<span class="go">((1355168,), (491671,))</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.salience">
<code class="descclassname">librosa.core.</code><code class="descname">salience</code><span class="sig-paren">(</span><em>S</em>, <em>freqs</em>, <em>h_range</em>, <em>weights=None</em>, <em>aggregate=None</em>, <em>filter_peaks=True</em>, <em>fill_value=nan</em>, <em>kind='linear'</em>, <em>axis=0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.salience" title="Permalink to this definition">¶</a></dt>
<dd><p>Harmonic salience function.</p>
<dl class="docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, n)]</span></dt>
<dd>input time frequency magnitude representation (stft, ifgram, etc).
Must be real-valued and non-negative.</dd>
<dt>freqs <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(S.shape[axis])</span></dt>
<dd>The frequency values corresponding to S&#8217;s elements along the
chosen axis.</dd>
<dt>h_range <span class="classifier-delimiter">:</span> <span class="classifier">list-like, non-negative</span></dt>
<dd>Harmonics to include in salience computation.  The first harmonic (1)
corresponds to <cite>S</cite> itself. Values less than one (e.g., 1/2) correspond
to sub-harmonics.</dd>
<dt>weights <span class="classifier-delimiter">:</span> <span class="classifier">list-like</span></dt>
<dd>The weight to apply to each harmonic in the summation. (default:
uniform weights). Must be the same length as <cite>harmonics</cite>.</dd>
<dt>aggregate <span class="classifier-delimiter">:</span> <span class="classifier">function</span></dt>
<dd>aggregation function (default: <cite>np.average</cite>)
If <cite>aggregate=np.average</cite>, then a weighted average is
computed per-harmonic according to the specified weights.
For all other aggregation functions, all harmonics
are treated equally.</dd>
<dt>filter_peaks <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>If true, returns harmonic summation only on frequencies of peak
magnitude. Otherwise returns harmonic summation over the full spectrum.
Defaults to True.</dd>
<dt>fill_value <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>The value to fill non-peaks in the output representation. (default:
np.nan) Only used if <cite>filter_peaks == True</cite>.</dd>
<dt>kind <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Interpolation type for harmonic estimation.
See <cite>scipy.interpolate.interp1d</cite>.</dd>
<dt>axis <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>The axis along which to compute harmonics</dd>
</dl>
<dl class="docutils">
<dt>S_sal <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray, shape=(len(h_range), [x.shape])</span></dt>
<dd><cite>S_sal</cite> will have the same shape as <cite>S</cite>, and measure
the overal harmonic energy at each frequency.</dd>
</dl>
<p>interp_harmonics</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">(),</span>
<span class="gp">... </span>                     <span class="n">duration</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">fft_frequencies</span><span class="p">(</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">harms</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weights</span> <span class="o">=</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.33</span><span class="p">,</span> <span class="mf">0.25</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S_sal</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">salience</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">freqs</span><span class="p">,</span> <span class="n">harms</span><span class="p">,</span> <span class="n">weights</span><span class="p">,</span> <span class="n">fill_value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">S_sal</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(1025, 646)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">S_sal</span><span class="p">,</span>
<span class="gp">... </span>                                                 <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Salience spectrogram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.samples_to_frames">
<code class="descclassname">librosa.core.</code><code class="descname">samples_to_frames</code><span class="sig-paren">(</span><em>samples</em>, <em>hop_length=512</em>, <em>n_fft=None</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.samples_to_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts sample indices into STFT frames.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Get the frame numbers for every 256 samples</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">samples_to_frames</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">22050</span><span class="p">,</span> <span class="mi">256</span><span class="p">))</span>
<span class="go">array([ 0,  0,  1,  1,  2,  2,  3,  3,  4,  4,  5,  5,  6,  6,</span>
<span class="go">        7,  7,  8,  8,  9,  9, 10, 10, 11, 11, 12, 12, 13, 13,</span>
<span class="go">       14, 14, 15, 15, 16, 16, 17, 17, 18, 18, 19, 19, 20, 20,</span>
<span class="go">       21, 21, 22, 22, 23, 23, 24, 24, 25, 25, 26, 26, 27, 27,</span>
<span class="go">       28, 28, 29, 29, 30, 30, 31, 31, 32, 32, 33, 33, 34, 34,</span>
<span class="go">       35, 35, 36, 36, 37, 37, 38, 38, 39, 39, 40, 40, 41, 41,</span>
<span class="go">       42, 42, 43])</span>
</pre></div>
</div>
<dl class="docutils">
<dt>samples <span class="classifier-delimiter">:</span> <span class="classifier">int or np.ndarray [shape=(n,)]</span></dt>
<dd>sample index or vector of sample indices</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number of samples between successive frames</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">None or int &gt; 0 [scalar]</span></dt>
<dd><p class="first">Optional: length of the FFT window.
If given, time conversion will include an offset of <cite>- n_fft / 2</cite>
to counteract windowing effects in STFT.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This may result in negative frame indices.</p>
</div>
</dd>
</dl>
<dl class="docutils">
<dt>frames <span class="classifier-delimiter">:</span> <span class="classifier">int or np.ndarray [shape=(n,), dtype=int]</span></dt>
<dd>Frame numbers corresponding to the given times:
<cite>frames[i] = floor( samples[i] / hop_length )</cite></dd>
</dl>
<p>samples_to_time : convert sample indices to time values
frames_to_samples : convert frame indices to sample indices</p>
</dd></dl>

<dl class="function">
<dt id="librosa.core.samples_to_time">
<code class="descclassname">librosa.core.</code><code class="descname">samples_to_time</code><span class="sig-paren">(</span><em>samples</em>, <em>sr=22050</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.samples_to_time" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert sample indices to time (in seconds).</p>
<dl class="docutils">
<dt>samples <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>Sample index or array of sample indices</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0</span></dt>
<dd>Sampling rate</dd>
</dl>
<dl class="docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=samples.shape, dtype=int]</span></dt>
<dd>Time values corresponding to <cite>samples</cite> (in seconds)</dd>
</dl>
<p>samples_to_frames : convert sample indices to frame indices
time_to_samples : convert time values to sample indices</p>
<p>Get timestamps corresponding to every 512 samples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">samples_to_time</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">22050</span><span class="p">,</span> <span class="mi">512</span><span class="p">))</span>
<span class="go">array([ 0.   ,  0.023,  0.046,  0.07 ,  0.093,  0.116,  0.139,</span>
<span class="go">        0.163,  0.186,  0.209,  0.232,  0.255,  0.279,  0.302,</span>
<span class="go">        0.325,  0.348,  0.372,  0.395,  0.418,  0.441,  0.464,</span>
<span class="go">        0.488,  0.511,  0.534,  0.557,  0.58 ,  0.604,  0.627,</span>
<span class="go">        0.65 ,  0.673,  0.697,  0.72 ,  0.743,  0.766,  0.789,</span>
<span class="go">        0.813,  0.836,  0.859,  0.882,  0.906,  0.929,  0.952,</span>
<span class="go">        0.975,  0.998])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.stft">
<code class="descclassname">librosa.core.</code><code class="descname">stft</code><span class="sig-paren">(</span><em>y</em>, <em>n_fft=2048</em>, <em>hop_length=None</em>, <em>win_length=None</em>, <em>window='hann'</em>, <em>center=True</em>, <em>dtype=&lt;class 'numpy.complex64'&gt;</em>, <em>pad_mode='reflect'</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.stft" title="Permalink to this definition">¶</a></dt>
<dd><p>Short-time Fourier transform (STFT)</p>
<dl class="docutils">
<dt>Returns a complex-valued matrix D such that</dt>
<dd><p class="first"><cite>np.abs(D[f, t])</cite> is the magnitude of frequency bin <cite>f</cite>
at frame <cite>t</cite></p>
<p class="last"><cite>np.angle(D[f, t])</cite> is the phase of frequency bin <cite>f</cite>
at frame <cite>t</cite></p>
</dd>
</dl>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)], real-valued</span></dt>
<dd>the input signal (audio time series)</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>FFT window size</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number audio of frames between STFT columns.
If unspecified, defaults <cite>win_length / 4</cite>.</dd>
<dt>win_length <span class="classifier-delimiter">:</span> <span class="classifier">int &lt;= n_fft [scalar]</span></dt>
<dd><p class="first">Each frame of audio is windowed by <cite>window()</cite>.
The window will be of length <cite>win_length</cite> and then padded
with zeros to match <cite>n_fft</cite>.</p>
<p class="last">If unspecified, defaults to <code class="docutils literal"><span class="pre">win_length</span> <span class="pre">=</span> <span class="pre">n_fft</span></code>.</p>
</dd>
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">string, tuple, number, function, or np.ndarray [shape=(n_fft,)]</span></dt>
<dd><ul class="first last simple">
<li>a window specification (string, tuple, or number);
see <cite>scipy.signal.get_window</cite></li>
<li>a window function, such as <cite>scipy.signal.hanning</cite></li>
<li>a vector or array of length <cite>n_fft</cite></li>
</ul>
</dd>
<dt>center <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><ul class="first last simple">
<li>If <cite>True</cite>, the signal <cite>y</cite> is padded so that frame
<cite>D[:, t]</cite> is centered at <cite>y[t * hop_length]</cite>.</li>
<li>If <cite>False</cite>, then <cite>D[:, t]</cite> begins at <cite>y[t * hop_length]</cite></li>
</ul>
</dd>
<dt>dtype <span class="classifier-delimiter">:</span> <span class="classifier">numeric type</span></dt>
<dd>Complex numeric type for <cite>D</cite>.  Default is 64-bit complex.</dd>
<dt>mode <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>If <cite>center=True</cite>, the padding mode to use at the edges of the signal.
By default, STFT uses reflection padding.</dd>
</dl>
<dl class="docutils">
<dt>D <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(1 + n_fft/2, t), dtype=dtype]</span></dt>
<dd>STFT matrix</dd>
</dl>
<p>istft : Inverse STFT</p>
<p>ifgram : Instantaneous frequency spectrogram</p>
<p>np.pad : array padding</p>
<p>This function caches at level 20.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span>
<span class="go">array([[  2.576e-03 -0.000e+00j,   4.327e-02 -0.000e+00j, ...,</span>
<span class="go">          3.189e-04 -0.000e+00j,  -5.961e-06 -0.000e+00j],</span>
<span class="go">       [  2.441e-03 +2.884e-19j,   5.145e-02 -5.076e-03j, ...,</span>
<span class="go">         -3.885e-04 -7.253e-05j,   7.334e-05 +3.868e-04j],</span>
<span class="go">      ...,</span>
<span class="go">       [ -7.120e-06 -1.029e-19j,  -1.951e-09 -3.568e-06j, ...,</span>
<span class="go">         -4.912e-07 -1.487e-07j,   4.438e-06 -1.448e-05j],</span>
<span class="go">       [  7.136e-06 -0.000e+00j,   3.561e-06 -0.000e+00j, ...,</span>
<span class="go">         -5.144e-07 -0.000e+00j,  -1.514e-05 -0.000e+00j]], dtype=complex64)</span>
</pre></div>
</div>
<p>Use left-aligned frames, instead of centered frames</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">D_left</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Use a shorter hop length</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">D_short</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">64</span><span class="p">)</span>
</pre></div>
</div>
<p>Display a spectrogram</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">D</span><span class="p">,</span>
<span class="gp">... </span>                                                 <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Power spectrogram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%+2.0f</span><span class="s1"> dB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.tempo_frequencies">
<code class="descclassname">librosa.core.</code><code class="descname">tempo_frequencies</code><span class="sig-paren">(</span><em>n_bins</em>, <em>hop_length=512</em>, <em>sr=22050</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.tempo_frequencies" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the frequencies (in beats-per-minute) corresponding
to an onset auto-correlation or tempogram matrix.</p>
<dl class="docutils">
<dt>n_bins <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>The number of lag bins</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>The number of samples between each bin</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0</span></dt>
<dd>The audio sampling rate</dd>
</dl>
<dl class="docutils">
<dt>bin_frequencies <span class="classifier-delimiter">:</span> <span class="classifier">ndarray [shape=(n_bins,)]</span></dt>
<dd><p class="first">vector of bin frequencies measured in BPM.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><cite>bin_frequencies[0] = +np.inf</cite> corresponds to 0-lag</p>
</div>
</dd>
</dl>
<p>Get the tempo frequencies corresponding to a 384-bin (8-second) tempogram</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">tempo_frequencies</span><span class="p">(</span><span class="mi">384</span><span class="p">)</span>
<span class="go">array([      inf,  2583.984,  1291.992, ...,     6.782,</span>
<span class="go">           6.764,     6.747])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.time_to_frames">
<code class="descclassname">librosa.core.</code><code class="descname">time_to_frames</code><span class="sig-paren">(</span><em>times</em>, <em>sr=22050</em>, <em>hop_length=512</em>, <em>n_fft=None</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.time_to_frames" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts time stamps into STFT frames.</p>
<dl class="docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>time (in seconds) or vector of time values</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>audio sampling rate</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number of samples between successive frames</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">None or int &gt; 0 [scalar]</span></dt>
<dd><p class="first">Optional: length of the FFT window.
If given, time conversion will include an offset of <cite>- n_fft / 2</cite>
to counteract windowing effects in STFT.</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This may result in negative frame indices.</p>
</div>
</dd>
</dl>
<dl class="docutils">
<dt>frames <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,), dtype=int]</span></dt>
<dd>Frame numbers corresponding to the given times:
<cite>frames[i] = floor( times[i] * sr / hop_length )</cite></dd>
</dl>
<p>frames_to_time : convert frame indices to time values
time_to_samples : convert time values to sample indices</p>
<p>Get the frame numbers for every 100ms</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">time_to_frames</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span>
<span class="gp">... </span>                        <span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="go">array([ 0,  4,  8, 12, 17, 21, 25, 30, 34, 38])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.time_to_samples">
<code class="descclassname">librosa.core.</code><code class="descname">time_to_samples</code><span class="sig-paren">(</span><em>times</em>, <em>sr=22050</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.time_to_samples" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert timestamps (in seconds) to sample indices.</p>
<dl class="docutils">
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">number or np.ndarray</span></dt>
<dd>Time value or array of time values (in seconds)</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0</span></dt>
<dd>Sampling rate</dd>
</dl>
<dl class="docutils">
<dt>samples <span class="classifier-delimiter">:</span> <span class="classifier">int or np.ndarray [shape=times.shape, dtype=int]</span></dt>
<dd>Sample indices corresponding to values in <cite>times</cite></dd>
</dl>
<p>time_to_frames : convert time values to frame indices
samples_to_time : convert sample indices to time values</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">time_to_samples</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">),</span> <span class="n">sr</span><span class="o">=</span><span class="mi">22050</span><span class="p">)</span>
<span class="go">array([    0,  2205,  4410,  6615,  8820, 11025, 13230, 15435,</span>
<span class="go">       17640, 19845])</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.to_mono">
<code class="descclassname">librosa.core.</code><code class="descname">to_mono</code><span class="sig-paren">(</span><em>y</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.to_mono" title="Permalink to this definition">¶</a></dt>
<dd><p>Force an audio signal down to mono.</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(2,n) or shape=(n,)]</span></dt>
<dd>audio time series, either stereo or mono</dd>
</dl>
<dl class="docutils">
<dt>y_mono <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd><cite>y</cite> as a monophonic time-series</dd>
</dl>
<p>This function caches at level 20.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">(),</span> <span class="n">mono</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(2, 1355168)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_mono</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">to_mono</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y_mono</span><span class="o">.</span><span class="n">shape</span>
<span class="go">(1355168,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.core.zero_crossings">
<code class="descclassname">librosa.core.</code><code class="descname">zero_crossings</code><span class="sig-paren">(</span><em>y</em>, <em>threshold=1e-10</em>, <em>ref_magnitude=None</em>, <em>pad=True</em>, <em>zero_pos=True</em>, <em>axis=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.core.zero_crossings" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the zero-crossings of a signal <cite>y</cite>: indices <cite>i</cite> such that
<cite>sign(y[i]) != sign(y[j])</cite>.</p>
<p>If <cite>y</cite> is multi-dimensional, then zero-crossings are computed along
the specified <cite>axis</cite>.</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>The input array</dd>
<dt>threshold <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 or None</span></dt>
<dd>If specified, values where <cite>-threshold &lt;= y &lt;= threshold</cite> are
clipped to 0.</dd>
<dt>ref_magnitude <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 or callable</span></dt>
<dd><p class="first">If numeric, the threshold is scaled relative to <cite>ref_magnitude</cite>.</p>
<p class="last">If callable, the threshold is scaled relative to
<cite>ref_magnitude(np.abs(y))</cite>.</p>
</dd>
<dt>pad <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd>If <cite>True</cite>, then <cite>y[0]</cite> is considered a valid zero-crossing.</dd>
<dt>zero_pos <span class="classifier-delimiter">:</span> <span class="classifier">boolean</span></dt>
<dd><p class="first">If <cite>True</cite> then the value 0 is interpreted as having positive sign.</p>
<p class="last">If <cite>False</cite>, then 0, -1, and +1 all have distinct signs.</p>
</dd>
<dt>axis <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Axis along which to compute zero-crossings.</dd>
</dl>
<dl class="docutils">
<dt>zero_crossings <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=y.shape, dtype=boolean]</span></dt>
<dd>Indicator array of zero-crossings in <cite>y</cite> along the selected axis.</dd>
</dl>
<p>This function caches at level 20.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Generate a time-series</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span><span class="p">,</span> <span class="mi">20</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span>
<span class="go">array([  0.000e+00,   9.694e-01,   4.759e-01,  -7.357e-01,</span>
<span class="go">        -8.372e-01,   3.247e-01,   9.966e-01,   1.646e-01,</span>
<span class="go">        -9.158e-01,  -6.142e-01,   6.142e-01,   9.158e-01,</span>
<span class="go">        -1.646e-01,  -9.966e-01,  -3.247e-01,   8.372e-01,</span>
<span class="go">         7.357e-01,  -4.759e-01,  -9.694e-01,  -9.797e-16])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Compute zero-crossings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">zero_crossings</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">z</span>
<span class="go">array([ True, False, False,  True, False,  True, False, False,</span>
<span class="go">        True, False,  True, False,  True, False, False,  True,</span>
<span class="go">       False,  True, False,  True], dtype=bool)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Stack y against the zero-crossing indicator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">vstack</span><span class="p">([</span><span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">])</span><span class="o">.</span><span class="n">T</span>
<span class="go">array([[  0.000e+00,   1.000e+00],</span>
<span class="go">       [  9.694e-01,   0.000e+00],</span>
<span class="go">       [  4.759e-01,   0.000e+00],</span>
<span class="go">       [ -7.357e-01,   1.000e+00],</span>
<span class="go">       [ -8.372e-01,   0.000e+00],</span>
<span class="go">       [  3.247e-01,   1.000e+00],</span>
<span class="go">       [  9.966e-01,   0.000e+00],</span>
<span class="go">       [  1.646e-01,   0.000e+00],</span>
<span class="go">       [ -9.158e-01,   1.000e+00],</span>
<span class="go">       [ -6.142e-01,   0.000e+00],</span>
<span class="go">       [  6.142e-01,   1.000e+00],</span>
<span class="go">       [  9.158e-01,   0.000e+00],</span>
<span class="go">       [ -1.646e-01,   1.000e+00],</span>
<span class="go">       [ -9.966e-01,   0.000e+00],</span>
<span class="go">       [ -3.247e-01,   0.000e+00],</span>
<span class="go">       [  8.372e-01,   1.000e+00],</span>
<span class="go">       [  7.357e-01,   0.000e+00],</span>
<span class="go">       [ -4.759e-01,   1.000e+00],</span>
<span class="go">       [ -9.694e-01,   0.000e+00],</span>
<span class="go">       [ -9.797e-16,   1.000e+00]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Find the indices of zero-crossings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">np</span><span class="o">.</span><span class="n">nonzero</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="go">(array([ 0,  3,  5,  8, 10, 12, 15, 17, 19]),)</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="module-librosa.beat">
<span id="beat-tracking"></span><h1>Beat tracking<a class="headerlink" href="#module-librosa.beat" title="Permalink to this headline">¶</a></h1>
<div class="section" id="beat-and-tempo">
<h2>Beat and tempo<a class="headerlink" href="#beat-and-tempo" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="librosa.beat.beat_track">
<code class="descclassname">librosa.beat.</code><code class="descname">beat_track</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>onset_envelope=None</em>, <em>hop_length=512</em>, <em>start_bpm=120.0</em>, <em>tightness=100</em>, <em>trim=True</em>, <em>bpm=None</em>, <em>units='frames'</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.beat.beat_track" title="Permalink to this definition">¶</a></dt>
<dd><p>Dynamic programming beat tracker.</p>
<dl class="docutils">
<dt>Beats are detected in three stages, following the method of <a href="#id40"><span class="problematic" id="id18">[1]_</span></a>:</dt>
<dd><ol class="first last arabic simple">
<li>Measure onset strength</li>
<li>Estimate tempo from onset correlation</li>
<li>Pick peaks in onset strength approximately consistent with estimated
tempo</li>
</ol>
</dd>
</dl>
<table class="docutils footnote" frame="void" id="id19" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Ellis, Daniel PW. &#8220;Beat tracking by dynamic programming.&#8221;
Journal of New Music Research 36.1 (2007): 51-60.
<a class="reference external" href="http://labrosa.ee.columbia.edu/projects/beattrack/">http://labrosa.ee.columbia.edu/projects/beattrack/</a></td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>onset_envelope <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>(optional) pre-computed onset strength envelope.</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number of audio samples between successive <cite>onset_envelope</cite> values</dd>
<dt>start_bpm <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>initial guess for the tempo estimator (in beats per minute)</dd>
<dt>tightness <span class="classifier-delimiter">:</span> <span class="classifier">float [scalar]</span></dt>
<dd>tightness of beat distribution around tempo</dd>
<dt>trim <span class="classifier-delimiter">:</span> <span class="classifier">bool [scalar]</span></dt>
<dd>trim leading/trailing beats with weak onsets</dd>
<dt>bpm <span class="classifier-delimiter">:</span> <span class="classifier">float [scalar]</span></dt>
<dd>(optional) If provided, use <cite>bpm</cite> as the tempo instead of
estimating it from <cite>onsets</cite>.</dd>
<dt>units <span class="classifier-delimiter">:</span> <span class="classifier">{&#8216;frames&#8217;, &#8216;samples&#8217;, &#8216;time&#8217;}</span></dt>
<dd>The units to encode detected beat events in.
By default, &#8216;frames&#8217; are used.</dd>
</dl>
<dl class="docutils">
<dt>tempo <span class="classifier-delimiter">:</span> <span class="classifier">float [scalar, non-negative]</span></dt>
<dd>estimated global tempo (in beats per minute)</dd>
<dt>beats <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(m,)]</span></dt>
<dd>estimated beat event locations in the specified units
(default is frame indices)</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If no onset strength could be detected, beat_tracker estimates 0 BPM
and returns an empty list.</p>
</div>
<dl class="docutils">
<dt>ParameterError</dt>
<dd><p class="first">if neither <cite>y</cite> nor <cite>onset_envelope</cite> are provided</p>
<p class="last">or if <cite>units</cite> is not one of &#8216;frames&#8217;, &#8216;samples&#8217;, or &#8216;time&#8217;</p>
</dd>
</dl>
<p>librosa.onset.onset_strength</p>
<p>Track beats using time series input</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span>
<span class="go">64.599609375</span>
</pre></div>
</div>
<p>Print the first 20 beat frames</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">beats</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>
<span class="go">array([ 320,  357,  397,  436,  480,  525,  569,  609,  658,</span>
<span class="go">        698,  737,  777,  817,  857,  896,  936,  976, 1016,</span>
<span class="go">       1055, 1095])</span>
</pre></div>
</div>
<p>Or print them as timestamps</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">beats</span><span class="p">[:</span><span class="mi">20</span><span class="p">],</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="go">array([  7.43 ,   8.29 ,   9.218,  10.124,  11.146,  12.19 ,</span>
<span class="go">        13.212,  14.141,  15.279,  16.208,  17.113,  18.042,</span>
<span class="go">        18.971,  19.9  ,  20.805,  21.734,  22.663,  23.591,</span>
<span class="go">        24.497,  25.426])</span>
</pre></div>
</div>
<p>Track beats using a pre-computed onset envelope</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">onset_env</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_strength</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span>
<span class="gp">... </span>                                         <span class="n">aggregate</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">median</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span><span class="n">onset_envelope</span><span class="o">=</span><span class="n">onset_env</span><span class="p">,</span>
<span class="gp">... </span>                                       <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span>
<span class="go">64.599609375</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beats</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span>
<span class="go">array([ 320,  357,  397,  436,  480,  525,  569,  609,  658,</span>
<span class="go">        698,  737,  777,  817,  857,  896,  936,  976, 1016,</span>
<span class="go">       1055, 1095])</span>
</pre></div>
</div>
<p>Plot the beat events against the onset strength envelope</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hop_length</span> <span class="o">=</span> <span class="mi">512</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">times</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">onset_env</span><span class="p">)),</span>
<span class="gp">... </span>                               <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">times</span><span class="p">,</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">onset_env</span><span class="p">),</span>
<span class="gp">... </span>         <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Onset strength&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">vlines</span><span class="p">(</span><span class="n">times</span><span class="p">[</span><span class="n">beats</span><span class="p">],</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Beats&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Limit the plot to a 15-second window</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">TimeFormatter</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.beat.tempo">
<code class="descclassname">librosa.beat.</code><code class="descname">tempo</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>onset_envelope=None</em>, <em>hop_length=512</em>, <em>start_bpm=120</em>, <em>std_bpm=1.0</em>, <em>ac_size=8.0</em>, <em>max_tempo=320.0</em>, <em>aggregate=&lt;function mean&gt;</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.beat.tempo" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate the tempo (beats per minute)</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of the time series</dd>
<dt>onset_envelope <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>pre-computed onset strength envelope</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>hop length of the time series</dd>
<dt>start_bpm <span class="classifier-delimiter">:</span> <span class="classifier">float [scalar]</span></dt>
<dd>initial guess of the BPM</dd>
<dt>std_bpm <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>standard deviation of tempo distribution</dd>
<dt>ac_size <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>length (in seconds) of the auto-correlation window</dd>
<dt>max_tempo <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar, optional]</span></dt>
<dd>If provided, only estimate tempo below this threshold</dd>
<dt>aggregate <span class="classifier-delimiter">:</span> <span class="classifier">callable [optional]</span></dt>
<dd>Aggregation function for estimating global tempo.
If <cite>None</cite>, then tempo is estimated independently for each frame.</dd>
</dl>
<dl class="docutils">
<dt>tempo <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [scalar]</span></dt>
<dd>estimated tempo (beats per minute)</dd>
</dl>
<p>librosa.onset.onset_strength
librosa.feature.tempogram</p>
<p>This function caches at level 30.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Estimate a static tempo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">onset_env</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_strength</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">tempo</span><span class="p">(</span><span class="n">onset_envelope</span><span class="o">=</span><span class="n">onset_env</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span>
<span class="go">array([129.199])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Or a dynamic tempo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtempo</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">tempo</span><span class="p">(</span><span class="n">onset_envelope</span><span class="o">=</span><span class="n">onset_env</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span>
<span class="gp">... </span>                            <span class="n">aggregate</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">dtempo</span>
<span class="go">array([ 143.555,  143.555,  143.555, ...,  161.499,  161.499,</span>
<span class="go">        172.266])</span>
</pre></div>
</div>
<p>Plot the estimated tempo against the onset autocorrelation</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Convert to scalar</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">asscalar</span><span class="p">(</span><span class="n">tempo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Compute 2-second windowed autocorrelation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hop_length</span> <span class="o">=</span> <span class="mi">512</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ac</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">autocorrelate</span><span class="p">(</span><span class="n">onset_env</span><span class="p">,</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">sr</span> <span class="o">//</span> <span class="n">hop_length</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">tempo_frequencies</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">ac</span><span class="p">),</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span>
<span class="gp">... </span>                                  <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Plot on a BPM axis.  We skip the first (0-lag) bin.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">freqs</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">ac</span><span class="p">)[</span><span class="mi">1</span><span class="p">:],</span>
<span class="gp">... </span>             <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Onset autocorrelation&#39;</span><span class="p">,</span> <span class="n">basex</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">tempo</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span>
<span class="gp">... </span>           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Tempo: </span><span class="si">{:.2f}</span><span class="s1"> BPM&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tempo</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Tempo (BPM)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Static tempo estimation&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Plot dynamic tempo estimates over a tempogram</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tg</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">tempogram</span><span class="p">(</span><span class="n">onset_envelope</span><span class="o">=</span><span class="n">onset_env</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span>
<span class="gp">... </span>                               <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">tg</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;tempo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dtempo</span><span class="p">))),</span> <span class="n">dtempo</span><span class="p">,</span>
<span class="gp">... </span>         <span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">1.5</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Tempo estimate&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Dynamic tempo estimation&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
<div class="section" id="module-librosa.feature">
<span id="feature-extraction"></span><h1>Feature extraction<a class="headerlink" href="#module-librosa.feature" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id20">
<h2>Feature extraction<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h2>
<div class="section" id="spectral-features">
<h3>Spectral features<a class="headerlink" href="#spectral-features" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="rhythm-features">
<h3>Rhythm features<a class="headerlink" href="#rhythm-features" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="feature-manipulation">
<h3>Feature manipulation<a class="headerlink" href="#feature-manipulation" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="librosa.feature.chroma_cens">
<code class="descclassname">librosa.feature.</code><code class="descname">chroma_cens</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>C=None</em>, <em>hop_length=512</em>, <em>fmin=None</em>, <em>tuning=None</em>, <em>n_chroma=12</em>, <em>n_octaves=7</em>, <em>bins_per_octave=None</em>, <em>cqt_mode='full'</em>, <em>window=None</em>, <em>norm=2</em>, <em>win_len_smooth=41</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.chroma_cens" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the chroma variant &#8220;Chroma Energy Normalized&#8221; (CENS), following <a href="#id41"><span class="problematic" id="id21">[1]_</span></a>.</p>
<table class="docutils footnote" frame="void" id="id22" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Meinard Müller and Sebastian Ewert
Chroma Toolbox: MATLAB implementations for extracting variants of chroma-based audio features
In Proceedings of the International Conference on Music Information Retrieval (ISMIR), 2011.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>C <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] [Optional]</span></dt>
<dd>a pre-computed constant-Q spectrogram</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>number of samples between successive chroma frames</dd>
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd>minimum frequency to analyze in the CQT.
Default: &#8216;C1&#8217; ~= 32.7 Hz</dd>
<dt>norm <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0, +-np.inf, or None</span></dt>
<dd>Column-wise normalization of the chromagram.</dd>
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Deviation (in cents) from A440 tuning</dd>
<dt>n_chroma <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>Number of chroma bins to produce</dd>
<dt>n_octaves <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>Number of octaves to analyze above <cite>fmin</cite></dd>
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">None or np.ndarray</span></dt>
<dd>Optional window parameter to <cite>filters.cq_to_chroma</cite></dd>
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>Number of bins per octave in the CQT.
Default: matches <cite>n_chroma</cite></dd>
<dt>cqt_mode <span class="classifier-delimiter">:</span> <span class="classifier">[&#8216;full&#8217;, &#8216;hybrid&#8217;]</span></dt>
<dd>Constant-Q transform mode</dd>
<dt>win_len_smooth <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>Length of temporal smoothing window.
Default: 41</dd>
</dl>
<dl class="docutils">
<dt>chroma_cens <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n_chroma, t)]</span></dt>
<dd>The output cens-chromagram</dd>
</dl>
<dl class="docutils">
<dt>chroma_cqt</dt>
<dd>Compute a chromagram from a constant-Q transform.</dd>
<dt>chroma_stft</dt>
<dd>Compute a chromagram from an STFT spectrogram or waveform.</dd>
</dl>
<p>Compare standard cqt chroma to CENS.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">(),</span>
<span class="gp">... </span>                     <span class="n">offset</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma_cens</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">chroma_cens</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma_cq</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">chroma_cqt</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">chroma_cq</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;chroma&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;chroma_cq&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">chroma_cens</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;chroma&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;chroma_cens&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.chroma_cqt">
<code class="descclassname">librosa.feature.</code><code class="descname">chroma_cqt</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>C=None</em>, <em>hop_length=512</em>, <em>fmin=None</em>, <em>norm=inf</em>, <em>threshold=0.0</em>, <em>tuning=None</em>, <em>n_chroma=12</em>, <em>n_octaves=7</em>, <em>window=None</em>, <em>bins_per_octave=None</em>, <em>cqt_mode='full'</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.chroma_cqt" title="Permalink to this definition">¶</a></dt>
<dd><p>Constant-Q chromagram</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>C <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] [Optional]</span></dt>
<dd>a pre-computed constant-Q spectrogram</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>number of samples between successive chroma frames</dd>
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd>minimum frequency to analyze in the CQT.
Default: &#8216;C1&#8217; ~= 32.7 Hz</dd>
<dt>norm <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0, +-np.inf, or None</span></dt>
<dd>Column-wise normalization of the chromagram.</dd>
<dt>threshold <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Pre-normalization energy threshold.  Values below the
threshold are discarded, resulting in a sparse chromagram.</dd>
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd>Deviation (in cents) from A440 tuning</dd>
<dt>n_chroma <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>Number of chroma bins to produce</dd>
<dt>n_octaves <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>Number of octaves to analyze above <cite>fmin</cite></dd>
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">None or np.ndarray</span></dt>
<dd>Optional window parameter to <cite>filters.cq_to_chroma</cite></dd>
<dt>bins_per_octave <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>Number of bins per octave in the CQT.
Default: matches <cite>n_chroma</cite></dd>
<dt>cqt_mode <span class="classifier-delimiter">:</span> <span class="classifier">[&#8216;full&#8217;, &#8216;hybrid&#8217;]</span></dt>
<dd>Constant-Q transform mode</dd>
</dl>
<dl class="docutils">
<dt>chromagram <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n_chroma, t)]</span></dt>
<dd>The output chromagram</dd>
</dl>
<p>librosa.util.normalize
librosa.core.cqt
librosa.core.hybrid_cqt
chroma_stft</p>
<p>Compare a long-window STFT chromagram to the CQT chromagram</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">(),</span>
<span class="gp">... </span>                     <span class="n">offset</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">duration</span><span class="o">=</span><span class="mi">15</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma_stft</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">chroma_stft</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span>
<span class="gp">... </span>                                          <span class="n">n_chroma</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">4096</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma_cq</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">chroma_cqt</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">chroma_stft</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;chroma&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;chroma_stft&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">chroma_cq</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;chroma&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;chroma_cqt&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.chroma_stft">
<code class="descclassname">librosa.feature.</code><code class="descname">chroma_stft</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>norm=inf</em>, <em>n_fft=2048</em>, <em>hop_length=512</em>, <em>tuning=None</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.chroma_stft" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a chromagram from a waveform or power spectrogram.</p>
<p>This implementation is derived from <cite>chromagram_E</cite> <a href="#id42"><span class="problematic" id="id23">[1]_</span></a></p>
<table class="docutils footnote" frame="void" id="id24" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Ellis, Daniel P.W.  &#8220;Chroma feature analysis and synthesis&#8221;
2007/04/21
<a class="reference external" href="http://labrosa.ee.columbia.edu/matlab/chroma-ansyn/">http://labrosa.ee.columbia.edu/matlab/chroma-ansyn/</a></td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] or None</span></dt>
<dd>power spectrogram</dd>
<dt>norm <span class="classifier-delimiter">:</span> <span class="classifier">float or None</span></dt>
<dd><p class="first">Column-wise normalization.
See <cite>librosa.util.normalize</cite> for details.</p>
<p class="last">If <cite>None</cite>, no normalization is performed.</p>
</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int  &gt; 0 [scalar]</span></dt>
<dd>FFT window size if provided <cite>y, sr</cite> instead of <cite>S</cite></dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>hop length if provided <cite>y, sr</cite> instead of <cite>S</cite></dd>
<dt>tuning <span class="classifier-delimiter">:</span> <span class="classifier">float in <cite>[-0.5, 0.5)</cite> [scalar] or None.</span></dt>
<dd>Deviation from A440 tuning in fractional bins (cents).
If <cite>None</cite>, it is automatically estimated.</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd>Arguments to parameterize chroma filters.
See <cite>librosa.filters.chroma</cite> for details.</dd>
</dl>
<dl class="docutils">
<dt>chromagram <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n_chroma, t)]</span></dt>
<dd>Normalized energy for each chroma bin at each frame.</dd>
</dl>
<dl class="docutils">
<dt>librosa.filters.chroma</dt>
<dd>Chroma filter bank construction</dd>
<dt>librosa.util.normalize</dt>
<dd>Vector normalization</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">chroma_stft</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="go">array([[ 0.974,  0.881, ...,  0.925,  1.   ],</span>
<span class="go">       [ 1.   ,  0.841, ...,  0.882,  0.878],</span>
<span class="go">       ...,</span>
<span class="go">       [ 0.658,  0.985, ...,  0.878,  0.764],</span>
<span class="go">       [ 0.969,  0.92 , ...,  0.974,  0.915]])</span>
</pre></div>
</div>
<p>Use an energy (magnitude) spectrum instead of power spectrogram</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">chroma_stft</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma</span>
<span class="go">array([[ 0.884,  0.91 , ...,  0.861,  0.858],</span>
<span class="go">       [ 0.963,  0.785, ...,  0.968,  0.896],</span>
<span class="go">       ...,</span>
<span class="go">       [ 0.871,  1.   , ...,  0.928,  0.829],</span>
<span class="go">       [ 1.   ,  0.982, ...,  0.93 ,  0.878]])</span>
</pre></div>
</div>
<p>Use a pre-computed power spectrogram with a larger frame</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">n_fft</span><span class="o">=</span><span class="mi">4096</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">chroma_stft</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma</span>
<span class="go">array([[ 0.685,  0.477, ...,  0.961,  0.986],</span>
<span class="go">       [ 0.674,  0.452, ...,  0.952,  0.926],</span>
<span class="go">       ...,</span>
<span class="go">       [ 0.844,  0.575, ...,  0.934,  0.869],</span>
<span class="go">       [ 0.793,  0.663, ...,  0.964,  0.972]])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">chroma</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;chroma&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Chromagram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.delta">
<code class="descclassname">librosa.feature.</code><code class="descname">delta</code><span class="sig-paren">(</span><em>data</em>, <em>width=9</em>, <em>order=1</em>, <em>axis=-1</em>, <em>trim=&lt;DEPRECATED parameter&gt;</em>, <em>mode='interp'</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.delta" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute delta features: local estimate of the derivative
of the input data along the selected axis.</p>
<p>Delta features are computed Savitsky-Golay filtering.</p>
<dl class="docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray</span></dt>
<dd>the input data matrix (eg, spectrogram)</dd>
<dt>width <span class="classifier-delimiter">:</span> <span class="classifier">int, positive, odd [scalar]</span></dt>
<dd>Number of frames over which to compute the delta features.
Cannot exceed the length of <cite>data</cite> along the specified axis.
If <cite>mode=&#8217;interp&#8217;</cite>, then <cite>width</cite> must be at least <cite>data.shape[axis]</cite>.</dd>
<dt>order <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>the order of the difference operator.
1 for first derivative, 2 for second, etc.</dd>
<dt>axis <span class="classifier-delimiter">:</span> <span class="classifier">int [scalar]</span></dt>
<dd>the axis along which to compute deltas.
Default is -1 (columns).</dd>
<dt>trim <span class="classifier-delimiter">:</span> <span class="classifier">bool [DEPRECATED]</span></dt>
<dd>This parameter is deprecated in 0.6.0 and will be removed
in 0.7.0.</dd>
<dt>mode <span class="classifier-delimiter">:</span> <span class="classifier">str, {&#8216;interp&#8217;, &#8216;nearest&#8217;, &#8216;mirror&#8217;, &#8216;constant&#8217;, &#8216;wrap&#8217;}</span></dt>
<dd>Padding mode for estimating differences at the boundaries.</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd>See <cite>scipy.signal.savgol_filter</cite></dd>
</dl>
<dl class="docutils">
<dt>delta_data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)]</span></dt>
<dd>delta matrix of <cite>data</cite> at specified order</dd>
</dl>
<p>This function caches at level 40.</p>
<p>scipy.signal.savgol_filter</p>
<p>Compute MFCC deltas, delta-deltas</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc_delta</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">delta</span><span class="p">(</span><span class="n">mfcc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc_delta</span>
<span class="go">array([[  1.666e+01,   1.666e+01, ...,   1.869e-15,   1.869e-15],</span>
<span class="go">       [  1.784e+01,   1.784e+01, ...,   6.085e-31,   6.085e-31],</span>
<span class="go">       ...,</span>
<span class="go">       [  7.262e-01,   7.262e-01, ...,   9.259e-31,   9.259e-31],</span>
<span class="go">       [  6.578e-01,   6.578e-01, ...,   7.597e-31,   7.597e-31]])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc_delta2</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">delta</span><span class="p">(</span><span class="n">mfcc</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mfcc_delta2</span>
<span class="go">array([[ -1.703e+01,  -1.703e+01, ...,   3.834e-14,   3.834e-14],</span>
<span class="go">       [ -1.108e+01,  -1.108e+01, ...,  -1.068e-30,  -1.068e-30],</span>
<span class="go">       ...,</span>
<span class="go">       [  4.075e-01,   4.075e-01, ...,  -1.565e-30,  -1.565e-30],</span>
<span class="go">       [  1.676e-01,   1.676e-01, ...,  -2.104e-30,  -2.104e-30]])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">mfcc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;MFCC&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">mfcc_delta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;MFCC-$\Delta$&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">mfcc_delta2</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;MFCC-$\Delta^2$&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.melspectrogram">
<code class="descclassname">librosa.feature.</code><code class="descname">melspectrogram</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_fft=2048</em>, <em>hop_length=512</em>, <em>power=2.0</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.melspectrogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute a mel-scaled spectrogram.</p>
<p>If a spectrogram input <cite>S</cite> is provided, then it is mapped directly onto
the mel basis <cite>mel_f</cite> by <cite>mel_f.dot(S)</cite>.</p>
<p>If a time-series input <cite>y, sr</cite> is provided, then its magnitude spectrogram
<cite>S</cite> is first computed, and then mapped onto the mel scale by
<cite>mel_f.dot(S**power)</cite>.  By default, <cite>power=2</cite> operates on a power spectrum.</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>audio time-series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)]</span></dt>
<dd>spectrogram</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>length of the FFT window</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>number of samples between successive frames.
See <cite>librosa.core.stft</cite></dd>
<dt>power <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>Exponent for the magnitude melspectrogram.
e.g., 1 for energy, 2 for power, etc.</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd>Mel filter bank parameters.
See <cite>librosa.filters.mel</cite> for details.</dd>
</dl>
<dl class="docutils">
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n_mels, t)]</span></dt>
<dd>Mel spectrogram</dd>
</dl>
<dl class="docutils">
<dt>librosa.filters.mel</dt>
<dd>Mel filter bank construction</dd>
<dt>librosa.core.stft</dt>
<dd>Short-time Fourier Transform</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="go">array([[  2.891e-07,   2.548e-03, ...,   8.116e-09,   5.633e-09],</span>
<span class="go">       [  1.986e-07,   1.162e-02, ...,   9.332e-08,   6.716e-09],</span>
<span class="go">       ...,</span>
<span class="go">       [  3.668e-09,   2.029e-08, ...,   3.208e-09,   2.864e-09],</span>
<span class="go">       [  2.561e-10,   2.096e-09, ...,   7.543e-10,   6.101e-10]])</span>
</pre></div>
</div>
<p>Using a pre-computed power spectrogram</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span><span class="o">**</span><span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">D</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Passing through arguments to the Mel filters</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_mels</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span>
<span class="gp">... </span>                                    <span class="n">fmax</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">power_to_db</span><span class="p">(</span><span class="n">S</span><span class="p">,</span>
<span class="gp">... </span>                                             <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;mel&#39;</span><span class="p">,</span> <span class="n">fmax</span><span class="o">=</span><span class="mi">8000</span><span class="p">,</span>
<span class="gp">... </span>                         <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%+2.0f</span><span class="s1"> dB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Mel spectrogram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.mfcc">
<code class="descclassname">librosa.feature.</code><code class="descname">mfcc</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_mfcc=20</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.mfcc" title="Permalink to this definition">¶</a></dt>
<dd><p>Mel-frequency cepstral coefficients</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] or None</span></dt>
<dd>log-power Mel spectrogram</dd>
<dt>n_mfcc: int &gt; 0 [scalar]</dt>
<dd>number of MFCCs to return</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd>Arguments to <cite>melspectrogram</cite>, if operating
on time series input</dd>
</dl>
<dl class="docutils">
<dt>M <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n_mfcc, t)]</span></dt>
<dd>MFCC sequence</dd>
</dl>
<p>melspectrogram</p>
<p>Generate mfccs from a time series</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="go">array([[ -5.229e+02,  -4.944e+02, ...,  -5.229e+02,  -5.229e+02],</span>
<span class="go">       [  7.105e-15,   3.787e+01, ...,  -7.105e-15,  -7.105e-15],</span>
<span class="go">       ...,</span>
<span class="go">       [  1.066e-14,  -7.500e+00, ...,   1.421e-14,   1.421e-14],</span>
<span class="go">       [  3.109e-14,  -5.058e+00, ...,   2.931e-14,   2.931e-14]])</span>
</pre></div>
</div>
<p>Use a pre-computed log-power Mel spectrogram</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">melspectrogram</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_mels</span><span class="o">=</span><span class="mi">128</span><span class="p">,</span>
<span class="gp">... </span>                                   <span class="n">fmax</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">librosa</span><span class="o">.</span><span class="n">power_to_db</span><span class="p">(</span><span class="n">S</span><span class="p">))</span>
<span class="go">array([[ -5.207e+02,  -4.898e+02, ...,  -5.207e+02,  -5.207e+02],</span>
<span class="go">       [ -2.576e-14,   4.054e+01, ...,  -3.997e-14,  -3.997e-14],</span>
<span class="go">       ...,</span>
<span class="go">       [  7.105e-15,  -3.534e+00, ...,   0.000e+00,   0.000e+00],</span>
<span class="go">       [  3.020e-14,  -2.613e+00, ...,   3.553e-14,   3.553e-14]])</span>
</pre></div>
</div>
<p>Get more components</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mfccs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">n_mfcc</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
</pre></div>
</div>
<p>Visualize the MFCC series</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">mfccs</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;MFCC&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.poly_features">
<code class="descclassname">librosa.feature.</code><code class="descname">poly_features</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_fft=2048</em>, <em>hop_length=512</em>, <em>order=1</em>, <em>freq=None</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.poly_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Get coefficients of fitting an nth-order polynomial to the columns
of a spectrogram.</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>audio sampling rate of <cite>y</cite></dd>
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] or None</span></dt>
<dd>(optional) spectrogram magnitude</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>FFT window size</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>hop length for STFT. See <cite>librosa.core.stft</cite> for details.</dd>
<dt>order <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>order of the polynomial to fit</dd>
<dt>freq <span class="classifier-delimiter">:</span> <span class="classifier">None or np.ndarray [shape=(d,) or shape=(d, t)]</span></dt>
<dd>Center frequencies for spectrogram bins.
If <cite>None</cite>, then FFT bin center frequencies are used.
Otherwise, it can be a single array of <cite>d</cite> center frequencies,
or a matrix of center frequencies as constructed by
<cite>librosa.core.ifgram</cite></dd>
</dl>
<dl class="docutils">
<dt>coefficients <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(order+1, t)]</span></dt>
<dd><p class="first">polynomial coefficients for each frame.</p>
<p><cite>coeffecients[0]</cite> corresponds to the highest degree (<cite>order</cite>),</p>
<p><cite>coefficients[1]</cite> corresponds to the next highest degree (<cite>order-1</cite>),</p>
<p class="last">down to the constant term <cite>coefficients[order]</cite>.</p>
</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
</pre></div>
</div>
<p>Fit a degree-0 polynomial (constant) to each frame</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p0</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">poly_features</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>Fit a linear polynomial to each frame</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p1</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">poly_features</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Fit a quadratic to each frame</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">p2</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">poly_features</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>Plot the results for comparison</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p2</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;order=2&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;order=1&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p0</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;order=0&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Constant&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p2</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;order=2&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p1</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;order=1&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Linear&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">p2</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;order=2&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Quadratic&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span> <span class="n">sharex</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.rmse">
<code class="descclassname">librosa.feature.</code><code class="descname">rmse</code><span class="sig-paren">(</span><em>y=None</em>, <em>S=None</em>, <em>frame_length=2048</em>, <em>hop_length=512</em>, <em>center=True</em>, <em>pad_mode='reflect'</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.rmse" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute root-mean-square (RMS) energy for each frame, either from the
audio samples <cite>y</cite> or from a spectrogram <cite>S</cite>.</p>
<p>Computing the energy from audio samples is faster as it doesn&#8217;t require a
STFT calculation. However, using a spectrogram will give a more accurate
representation of energy over time because its frames can be windowed,
thus prefer using <cite>S</cite> if it&#8217;s already available.</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>(optional) audio time series. Required if <cite>S</cite> is not input.</dd>
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] or None</span></dt>
<dd>(optional) spectrogram magnitude. Required if <cite>y</cite> is not input.</dd>
<dt>frame_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>length of analysis frame (in samples) for energy calculation</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>hop length for STFT. See <cite>librosa.core.stft</cite> for details.</dd>
<dt>center <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first">If <cite>True</cite> and operating on time-domain input (<cite>y</cite>), pad the signal
by <cite>frame_length//2</cite> on either side.</p>
<p class="last">If operating on spectrogram input, this has no effect.</p>
</dd>
<dt>pad_mode <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>Padding mode for centered analysis.  See <cite>np.pad</cite> for valid
values.</dd>
</dl>
<dl class="docutils">
<dt>rms <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(1, t)]</span></dt>
<dd>RMS value for each frame</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">rmse</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
<span class="go">array([[ 0.   ,  0.056, ...,  0.   ,  0.   ]], dtype=float32)</span>
</pre></div>
</div>
<p>Or from spectrogram input</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">S</span><span class="p">,</span> <span class="n">phase</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">magphase</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rms</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">rmse</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">semilogy</span><span class="p">(</span><span class="n">rms</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;RMS Energy&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">rms</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s1">&#39;best&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;log Power spectrogram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
<p>Use a STFT window of constant ones and no frame centering to get consistent
results with the RMS energy computed from the audio samples <cite>y</cite></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">magphase</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">window</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="kc">False</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">rmse</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.spectral_bandwidth">
<code class="descclassname">librosa.feature.</code><code class="descname">spectral_bandwidth</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_fft=2048</em>, <em>hop_length=512</em>, <em>freq=None</em>, <em>centroid=None</em>, <em>norm=True</em>, <em>p=2</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.spectral_bandwidth" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute p&#8217;th-order spectral bandwidth:</p>
<blockquote>
<div>(sum_k S[k] * (freq[k] - centroid)**p)**(1/p)</div></blockquote>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>audio sampling rate of <cite>y</cite></dd>
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] or None</span></dt>
<dd>(optional) spectrogram magnitude</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>FFT window size</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>hop length for STFT. See <cite>librosa.core.stft</cite> for details.</dd>
<dt>freq <span class="classifier-delimiter">:</span> <span class="classifier">None or np.ndarray [shape=(d,) or shape=(d, t)]</span></dt>
<dd>Center frequencies for spectrogram bins.
If <cite>None</cite>, then FFT bin center frequencies are used.
Otherwise, it can be a single array of <cite>d</cite> center frequencies,
or a matrix of center frequencies as constructed by
<cite>librosa.core.ifgram</cite></dd>
<dt>centroid <span class="classifier-delimiter">:</span> <span class="classifier">None or np.ndarray [shape=(1, t)]</span></dt>
<dd>pre-computed centroid frequencies</dd>
<dt>norm <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>Normalize per-frame spectral energy (sum to one)</dd>
<dt>p <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd>Power to raise deviation from spectral centroid.</dd>
</dl>
<dl class="docutils">
<dt>bandwidth <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(1, t)]</span></dt>
<dd>frequency bandwidth for each frame</dd>
</dl>
<p>From time-series input</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec_bw</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_bandwidth</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">spec_bw</span>
<span class="go">array([[ 3379.878,  1429.486, ...,  3235.214,  3080.148]])</span>
</pre></div>
</div>
<p>From spectrogram input</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">S</span><span class="p">,</span> <span class="n">phase</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">magphase</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_bandwidth</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
<span class="go">array([[ 3379.878,  1429.486, ...,  3235.214,  3080.148]])</span>
</pre></div>
</div>
<p>Using variable bin center frequencies</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">if_gram</span><span class="p">,</span> <span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">ifgram</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_bandwidth</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">D</span><span class="p">),</span> <span class="n">freq</span><span class="o">=</span><span class="n">if_gram</span><span class="p">)</span>
<span class="go">array([[ 3380.011,  1429.11 , ...,  3235.22 ,  3080.148]])</span>
</pre></div>
</div>
<p>Plot the result</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">semilogy</span><span class="p">(</span><span class="n">spec_bw</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Spectral bandwidth&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Hz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">spec_bw</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;log Power spectrogram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.spectral_centroid">
<code class="descclassname">librosa.feature.</code><code class="descname">spectral_centroid</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_fft=2048</em>, <em>hop_length=512</em>, <em>freq=None</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.spectral_centroid" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the spectral centroid.</p>
<p>Each frame of a magnitude spectrogram is normalized and treated as a
distribution over frequency bins, from which the mean (centroid) is
extracted per frame.</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>audio sampling rate of <cite>y</cite></dd>
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] or None</span></dt>
<dd>(optional) spectrogram magnitude</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>FFT window size</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>hop length for STFT. See <cite>librosa.core.stft</cite> for details.</dd>
<dt>freq <span class="classifier-delimiter">:</span> <span class="classifier">None or np.ndarray [shape=(d,) or shape=(d, t)]</span></dt>
<dd>Center frequencies for spectrogram bins.
If <cite>None</cite>, then FFT bin center frequencies are used.
Otherwise, it can be a single array of <cite>d</cite> center frequencies,
or a matrix of center frequencies as constructed by
<cite>librosa.core.ifgram</cite></dd>
</dl>
<dl class="docutils">
<dt>centroid <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(1, t)]</span></dt>
<dd>centroid frequencies</dd>
</dl>
<dl class="docutils">
<dt>librosa.core.stft</dt>
<dd>Short-time Fourier Transform</dd>
<dt>librosa.core.ifgram</dt>
<dd>Instantaneous-frequency spectrogram</dd>
</dl>
<p>From time-series input:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cent</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_centroid</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cent</span>
<span class="go">array([[ 4382.894,   626.588, ...,  5037.07 ,  5413.398]])</span>
</pre></div>
</div>
<p>From spectrogram input:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">S</span><span class="p">,</span> <span class="n">phase</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">magphase</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_centroid</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
<span class="go">array([[ 4382.894,   626.588, ...,  5037.07 ,  5413.398]])</span>
</pre></div>
</div>
<p>Using variable bin center frequencies:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">if_gram</span><span class="p">,</span> <span class="n">D</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">ifgram</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_centroid</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">D</span><span class="p">),</span> <span class="n">freq</span><span class="o">=</span><span class="n">if_gram</span><span class="p">)</span>
<span class="go">array([[ 4420.719,   625.769, ...,  5011.86 ,  5221.492]])</span>
</pre></div>
</div>
<p>Plot the result</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">semilogy</span><span class="p">(</span><span class="n">cent</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Spectral centroid&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Hz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">cent</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;log Power spectrogram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.spectral_contrast">
<code class="descclassname">librosa.feature.</code><code class="descname">spectral_contrast</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_fft=2048</em>, <em>hop_length=512</em>, <em>freq=None</em>, <em>fmin=200.0</em>, <em>n_bands=6</em>, <em>quantile=0.02</em>, <em>linear=False</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.spectral_contrast" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute spectral contrast <a href="#id43"><span class="problematic" id="id25">[1]_</span></a></p>
<table class="docutils footnote" frame="void" id="id26" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Jiang, Dan-Ning, Lie Lu, Hong-Jiang Zhang, Jian-Hua Tao,
and Lian-Hong Cai.
&#8220;Music type classification by spectral contrast feature.&#8221;
In Multimedia and Expo, 2002. ICME&#8216;02. Proceedings.
2002 IEEE International Conference on, vol. 1, pp. 113-116.
IEEE, 2002.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number  &gt; 0 [scalar]</span></dt>
<dd>audio sampling rate of <cite>y</cite></dd>
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] or None</span></dt>
<dd>(optional) spectrogram magnitude</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>FFT window size</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>hop length for STFT. See <cite>librosa.core.stft</cite> for details.</dd>
<dt>freq <span class="classifier-delimiter">:</span> <span class="classifier">None or np.ndarray [shape=(d,)]</span></dt>
<dd>Center frequencies for spectrogram bins.
If <cite>None</cite>, then FFT bin center frequencies are used.
Otherwise, it can be a single array of <cite>d</cite> center frequencies.</dd>
<dt>fmin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0</span></dt>
<dd>Frequency cutoff for the first bin <cite>[0, fmin]</cite>
Subsequent bins will cover <cite>[fmin, 2*fmin]</cite>, <cite>[2*fmin, 4*fmin]</cite>, etc.</dd>
<dt>n_bands <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 1</span></dt>
<dd>number of frequency bands</dd>
<dt>quantile <span class="classifier-delimiter">:</span> <span class="classifier">float in (0, 1)</span></dt>
<dd>quantile for determining peaks and valleys</dd>
<dt>linear <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd><p class="first">If <cite>True</cite>, return the linear difference of magnitudes:
<cite>peaks - valleys</cite>.</p>
<p class="last">If <cite>False</cite>, return the logarithmic difference:
<cite>log(peaks) - log(valleys)</cite>.</p>
</dd>
</dl>
<dl class="docutils">
<dt>contrast <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n_bands + 1, t)]</span></dt>
<dd>each row of spectral contrast values corresponds to a given
octave-based frequency</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">abs</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">contrast</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_contrast</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">S</span><span class="p">,</span>
<span class="gp">... </span>                                                 <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="s1">&#39;</span><span class="si">%+2.0f</span><span class="s1"> dB&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Power spectrogram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">contrast</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frequency bands&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Spectral contrast&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.spectral_flatness">
<code class="descclassname">librosa.feature.</code><code class="descname">spectral_flatness</code><span class="sig-paren">(</span><em>y=None</em>, <em>S=None</em>, <em>n_fft=2048</em>, <em>hop_length=512</em>, <em>amin=1e-10</em>, <em>power=2.0</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.spectral_flatness" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute spectral flatness</p>
<p>Spectral flatness (or tonality coefficient) is a measure to
quantify how much noise-like a sound is, as opposed to being
tone-like <a href="#id44"><span class="problematic" id="id27">[1]_</span></a>. A high spectral flatness (closer to 1.0)
indicates the spectrum is similar to white noise.
It is often converted to decibel.</p>
<table class="docutils footnote" frame="void" id="id28" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Dubnov, Shlomo  &#8220;Generalization of spectral flatness
measure for non-gaussian linear processes&#8221;
IEEE Signal Processing Letters, 2004, Vol. 11.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>audio time series</dd>
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] or None</span></dt>
<dd>(optional) pre-computed spectrogram magnitude</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>FFT window size</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>hop length for STFT. See <cite>librosa.core.stft</cite> for details.</dd>
<dt>amin <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>minimum threshold for <cite>S</cite> (=added noise floor for numerical stability)</dd>
<dt>power <span class="classifier-delimiter">:</span> <span class="classifier">float &gt; 0 [scalar]</span></dt>
<dd>Exponent for the magnitude spectrogram.
e.g., 1 for energy, 2 for power, etc.
Power spectrogram is usually used for computing spectral flatness.</dd>
</dl>
<dl class="docutils">
<dt>flatness <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(1, t)]</span></dt>
<dd>spectral flatness for each frame.
The returned value is in [0, 1] and often converted to dB scale.</dd>
</dl>
<p>From time-series input</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flatness</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_flatness</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">flatness</span>
<span class="go">array([[  1.00000e+00,   5.82299e-03,   5.64624e-04, ...,   9.99063e-01,</span>
<span class="go">      1.00000e+00,   1.00000e+00]], dtype=float32)</span>
</pre></div>
</div>
<p>From spectrogram input</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">S</span><span class="p">,</span> <span class="n">phase</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">magphase</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_flatness</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">)</span>
<span class="go">array([[  1.00000e+00,   5.82299e-03,   5.64624e-04, ...,   9.99063e-01,</span>
<span class="go">      1.00000e+00,   1.00000e+00]], dtype=float32)</span>
</pre></div>
</div>
<p>From power spectrogram input</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">S</span><span class="p">,</span> <span class="n">phase</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">magphase</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S_power</span> <span class="o">=</span> <span class="n">S</span> <span class="o">**</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_flatness</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S_power</span><span class="p">,</span> <span class="n">power</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span>
<span class="go">array([[  1.00000e+00,   5.82299e-03,   5.64624e-04, ...,   9.99063e-01,</span>
<span class="go">      1.00000e+00,   1.00000e+00]], dtype=float32)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.spectral_rolloff">
<code class="descclassname">librosa.feature.</code><code class="descname">spectral_rolloff</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>S=None</em>, <em>n_fft=2048</em>, <em>hop_length=512</em>, <em>freq=None</em>, <em>roll_percent=0.85</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.spectral_rolloff" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute roll-off frequency</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>audio time series</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>audio sampling rate of <cite>y</cite></dd>
<dt>S <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(d, t)] or None</span></dt>
<dd>(optional) spectrogram magnitude</dd>
<dt>n_fft <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>FFT window size</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>hop length for STFT. See <cite>librosa.core.stft</cite> for details.</dd>
<dt>freq <span class="classifier-delimiter">:</span> <span class="classifier">None or np.ndarray [shape=(d,) or shape=(d, t)]</span></dt>
<dd><p class="first">Center frequencies for spectrogram bins.
If <cite>None</cite>, then FFT bin center frequencies are used.
Otherwise, it can be a single array of <cite>d</cite> center frequencies,</p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><cite>freq</cite> is assumed to be sorted in increasing order</p>
</div>
</dd>
<dt>roll_percent <span class="classifier-delimiter">:</span> <span class="classifier">float [0 &lt; roll_percent &lt; 1]</span></dt>
<dd>Roll-off percentage.</dd>
</dl>
<dl class="docutils">
<dt>rolloff <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(1, t)]</span></dt>
<dd>roll-off frequency for each frame</dd>
</dl>
<p>From time-series input</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rolloff</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_rolloff</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rolloff</span>
<span class="go">array([[ 8376.416,   968.994, ...,  8925.513,  9108.545]])</span>
</pre></div>
</div>
<p>From spectrogram input</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">S</span><span class="p">,</span> <span class="n">phase</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">magphase</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">stft</span><span class="p">(</span><span class="n">y</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_rolloff</span><span class="p">(</span><span class="n">S</span><span class="o">=</span><span class="n">S</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="go">array([[ 8376.416,   968.994, ...,  8925.513,  9108.545]])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># With a higher roll percentage:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">spectral_rolloff</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">roll_percent</span><span class="o">=</span><span class="mf">0.95</span><span class="p">)</span>
<span class="go">array([[ 10012.939,   3003.882, ...,  10034.473,  10077.539]])</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">semilogy</span><span class="p">(</span><span class="n">rolloff</span><span class="o">.</span><span class="n">T</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Roll-off frequency&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Hz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="n">rolloff</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">amplitude_to_db</span><span class="p">(</span><span class="n">S</span><span class="p">,</span> <span class="n">ref</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;log&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;log Power spectrogram&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.stack_memory">
<code class="descclassname">librosa.feature.</code><code class="descname">stack_memory</code><span class="sig-paren">(</span><em>data</em>, <em>n_steps=2</em>, <em>delay=1</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.stack_memory" title="Permalink to this definition">¶</a></dt>
<dd><p>Short-term history embedding: vertically concatenate a data
vector or matrix with delayed copies of itself.</p>
<p>Each column <cite>data[:, i]</cite> is mapped to:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">data</span><span class="p">[:,</span> <span class="n">i</span><span class="p">]</span> <span class="o">-&gt;</span>  <span class="p">[</span><span class="n">data</span><span class="p">[:,</span> <span class="n">i</span><span class="p">],</span>
                <span class="n">data</span><span class="p">[:,</span> <span class="n">i</span> <span class="o">-</span> <span class="n">delay</span><span class="p">],</span>
                <span class="o">...</span>
                <span class="n">data</span><span class="p">[:,</span> <span class="n">i</span> <span class="o">-</span> <span class="p">(</span><span class="n">n_steps</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">delay</span><span class="p">]]</span>
</pre></div>
</div>
<p>For columns <cite>i &lt; (n_steps - 1) * delay</cite> , the data will be padded.
By default, the data is padded with zeros, but this behavior can be
overridden by supplying additional keyword arguments which are passed
to <cite>np.pad()</cite>.</p>
<dl class="docutils">
<dt>data <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(t,) or (d, t)]</span></dt>
<dd>Input data matrix.  If <cite>data</cite> is a vector (<cite>data.ndim == 1</cite>),
it will be interpreted as a row matrix and reshaped to <cite>(1, t)</cite>.</dd>
<dt>n_steps <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>embedding dimension, the number of steps back in time to stack</dd>
<dt>delay <span class="classifier-delimiter">:</span> <span class="classifier">int != 0 [scalar]</span></dt>
<dd><p class="first">the number of columns to step.</p>
<p>Positive values embed from the past (previous columns).</p>
<p class="last">Negative values embed from the future (subsequent columns).</p>
</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd>Additional arguments to pass to <cite>np.pad</cite>.</dd>
</dl>
<dl class="docutils">
<dt>data_history <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(m * d, t)]</span></dt>
<dd>data augmented with lagged copies of itself,
where <cite>m == n_steps - 1</cite>.</dd>
</dl>
<p>This function caches at level 40.</p>
<p>Keep two steps (current and previous)</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">stack_memory</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="go">array([[-3, -2, -1,  0,  1,  2],</span>
<span class="go">       [ 0, -3, -2, -1,  0,  1]])</span>
</pre></div>
</div>
<p>Or three steps</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">stack_memory</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n_steps</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">array([[-3, -2, -1,  0,  1,  2],</span>
<span class="go">       [ 0, -3, -2, -1,  0,  1],</span>
<span class="go">       [ 0,  0, -3, -2, -1,  0]])</span>
</pre></div>
</div>
<p>Use reflection padding instead of zero-padding</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">stack_memory</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n_steps</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;reflect&#39;</span><span class="p">)</span>
<span class="go">array([[-3, -2, -1,  0,  1,  2],</span>
<span class="go">       [-2, -3, -2, -1,  0,  1],</span>
<span class="go">       [-1, -2, -3, -2, -1,  0]])</span>
</pre></div>
</div>
<p>Or pad with edge-values, and delay by 2</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">stack_memory</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">n_steps</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">delay</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;edge&#39;</span><span class="p">)</span>
<span class="go">array([[-3, -2, -1,  0,  1,  2],</span>
<span class="go">       [-3, -3, -3, -2, -1,  0],</span>
<span class="go">       [-3, -3, -3, -3, -3, -2]])</span>
</pre></div>
</div>
<p>Stack time-lagged beat-synchronous chroma edge padding</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">chroma_stft</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">fix_frames</span><span class="p">(</span><span class="n">beats</span><span class="p">,</span> <span class="n">x_min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">x_max</span><span class="o">=</span><span class="n">chroma</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma_sync</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">sync</span><span class="p">(</span><span class="n">chroma</span><span class="p">,</span> <span class="n">beats</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chroma_lag</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">stack_memory</span><span class="p">(</span><span class="n">chroma_sync</span><span class="p">,</span> <span class="n">n_steps</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span>
<span class="gp">... </span>                                          <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;edge&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Plot the result</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">beat_times</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">beats</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">chroma_lag</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;chroma&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span>
<span class="gp">... </span>                         <span class="n">x_coords</span><span class="o">=</span><span class="n">beat_times</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">yticks</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">24</span><span class="p">],</span> <span class="p">[</span><span class="s1">&#39;Lag=0&#39;</span><span class="p">,</span> <span class="s1">&#39;Lag=1&#39;</span><span class="p">,</span> <span class="s1">&#39;Lag=2&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Time-lagged chroma&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.tempogram">
<code class="descclassname">librosa.feature.</code><code class="descname">tempogram</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>onset_envelope=None</em>, <em>hop_length=512</em>, <em>win_length=384</em>, <em>center=True</em>, <em>window='hann'</em>, <em>norm=inf</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.tempogram" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the tempogram: local autocorrelation of the onset strength envelope. <a href="#id45"><span class="problematic" id="id29">[1]_</span></a></p>
<table class="docutils footnote" frame="void" id="id30" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Grosche, Peter, Meinard Müller, and Frank Kurth.
&#8220;Cyclic tempogram - A mid-level tempo representation for music signals.&#8221;
ICASSP, 2010.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>Audio time series.</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>onset_envelope <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,) or (m, n)] or None</span></dt>
<dd><p class="first">Optional pre-computed onset strength envelope as provided by
<cite>onset.onset_strength</cite>.</p>
<p class="last">If multi-dimensional, tempograms are computed independently for each
band (first dimension).</p>
</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>number of audio samples between successive onset measurements</dd>
<dt>win_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>length of the onset autocorrelation window (in frames/onset measurements)
The default settings (384) corresponds to <cite>384 * hop_length / sr ~= 8.9s</cite>.</dd>
<dt>center <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>If <cite>True</cite>, onset autocorrelation windows are centered.
If <cite>False</cite>, windows are left-aligned.</dd>
<dt>window <span class="classifier-delimiter">:</span> <span class="classifier">string, function, number, tuple, or np.ndarray [shape=(win_length,)]</span></dt>
<dd>A window specification as in <cite>core.stft</cite>.</dd>
<dt>norm <span class="classifier-delimiter">:</span> <span class="classifier">{np.inf, -np.inf, 0, float &gt; 0, None}</span></dt>
<dd>Normalization mode.  Set to <cite>None</cite> to disable normalization.</dd>
</dl>
<dl class="docutils">
<dt>tempogram <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(win_length, n) or (m, win_length, n)]</span></dt>
<dd><p class="first">Localized autocorrelation of the onset strength envelope.</p>
<p class="last">If given multi-band input (<cite>onset_envelope.shape==(m,n)</cite>) then
<cite>tempogram[i]</cite> is the tempogram of <cite>onset_envelope[i]</cite>.</p>
</dd>
</dl>
<dl class="docutils">
<dt>ParameterError</dt>
<dd><p class="first">if neither <cite>y</cite> nor <cite>onset_envelope</cite> are provided</p>
<p class="last">if <cite>win_length &lt; 1</cite></p>
</dd>
</dl>
<p>librosa.onset.onset_strength
librosa.util.normalize
librosa.core.stft</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="c1"># Compute local onset autocorrelation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hop_length</span> <span class="o">=</span> <span class="mi">512</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">oenv</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">onset</span><span class="o">.</span><span class="n">onset_strength</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempogram</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">tempogram</span><span class="p">(</span><span class="n">onset_envelope</span><span class="o">=</span><span class="n">oenv</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span>
<span class="gp">... </span>                                      <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Compute global onset autocorrelation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ac_global</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">autocorrelate</span><span class="p">(</span><span class="n">oenv</span><span class="p">,</span> <span class="n">max_size</span><span class="o">=</span><span class="n">tempogram</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ac_global</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">ac_global</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Estimate the global tempo for display purposes</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">tempo</span><span class="p">(</span><span class="n">onset_envelope</span><span class="o">=</span><span class="n">oenv</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span>
<span class="gp">... </span>                           <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">oenv</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Onset strength&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">([])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># We&#39;ll truncate the display to a narrower range of tempi</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">tempogram</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>                         <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;tempo&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="n">tempo</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Estimated tempo=</span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tempo</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">framealpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">tempogram</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="nb">float</span><span class="p">(</span><span class="n">hop_length</span><span class="p">)</span> <span class="o">/</span> <span class="n">sr</span><span class="p">,</span>
<span class="gp">... </span>                <span class="n">num</span><span class="o">=</span><span class="n">tempogram</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">tempogram</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mean local autocorrelation&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">ac_global</span><span class="p">,</span> <span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Global autocorrelation&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Lag (seconds)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># We can also plot on a BPM axis</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">freqs</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">tempo_frequencies</span><span class="p">(</span><span class="n">tempogram</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">hop_length</span><span class="o">=</span><span class="n">hop_length</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">freqs</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">tempogram</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">),</span>
<span class="gp">... </span>             <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Mean local autocorrelation&#39;</span><span class="p">,</span> <span class="n">basex</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">semilogx</span><span class="p">(</span><span class="n">freqs</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="n">ac_global</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span> <span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span>
<span class="gp">... </span>             <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Global autocorrelation&#39;</span><span class="p">,</span> <span class="n">basex</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axvline</span><span class="p">(</span><span class="n">tempo</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;--&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=.</span><span class="mi">8</span><span class="p">,</span>
<span class="gp">... </span>            <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Estimated tempo=</span><span class="si">{:g}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">tempo</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">frameon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;BPM&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.tonnetz">
<code class="descclassname">librosa.feature.</code><code class="descname">tonnetz</code><span class="sig-paren">(</span><em>y=None</em>, <em>sr=22050</em>, <em>chroma=None</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.tonnetz" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the tonal centroid features (tonnetz), following the method of
<a href="#id46"><span class="problematic" id="id31">[1]_</span></a>.</p>
<table class="docutils footnote" frame="void" id="id32" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label">[1]</td><td>Harte, C., Sandler, M., &amp; Gasser, M. (2006). &#8220;Detecting Harmonic
Change in Musical Audio.&#8221; In Proceedings of the 1st ACM Workshop
on Audio and Music Computing Multimedia (pp. 21-26).
Santa Barbara, CA, USA: ACM Press. doi:10.1145/1178723.1178727.</td></tr>
</tbody>
</table>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)] or None</span></dt>
<dd>Audio time series.</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">number &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>chroma <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n_chroma, t)] or None</span></dt>
<dd><p class="first">Normalized energy for each chroma bin at each frame.</p>
<p class="last">If <cite>None</cite>, a cqt chromagram is performed.</p>
</dd>
</dl>
<dl class="docutils">
<dt>tonnetz <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape(6, t)]</span></dt>
<dd><p class="first">Tonal centroid features for each frame.</p>
<dl class="last docutils">
<dt>Tonnetz dimensions:</dt>
<dd><ul class="first last simple">
<li>0: Fifth x-axis</li>
<li>1: Fifth y-axis</li>
<li>2: Minor x-axis</li>
<li>3: Minor y-axis</li>
<li>4: Major x-axis</li>
<li>5: Major y-axis</li>
</ul>
</dd>
</dl>
</dd>
</dl>
<dl class="docutils">
<dt>chroma_cqt</dt>
<dd>Compute a chromagram from a constant-Q transform.</dd>
<dt>chroma_stft</dt>
<dd>Compute a chromagram from an STFT spectrogram or waveform.</dd>
</dl>
<p>Compute tonnetz features from the harmonic component of a song</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">y</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">effects</span><span class="o">.</span><span class="n">harmonic</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tonnetz</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">tonnetz</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tonnetz</span>
<span class="go">array([[-0.073, -0.053, ..., -0.054, -0.073],</span>
<span class="go">       [ 0.001,  0.001, ..., -0.054, -0.062],</span>
<span class="go">       ...,</span>
<span class="go">       [ 0.039,  0.034, ...,  0.044,  0.064],</span>
<span class="go">       [ 0.005,  0.002, ...,  0.011,  0.017]])</span>
</pre></div>
</div>
<p>Compare the tonnetz features to <cite>chroma_cqt</cite></p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">tonnetz</span><span class="p">,</span> <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;tonnetz&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Tonal Centroids (Tonnetz)&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">specshow</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">chroma_cqt</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">),</span>
<span class="gp">... </span>                         <span class="n">y_axis</span><span class="o">=</span><span class="s1">&#39;chroma&#39;</span><span class="p">,</span> <span class="n">x_axis</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Chroma&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.feature.zero_crossing_rate">
<code class="descclassname">librosa.feature.</code><code class="descname">zero_crossing_rate</code><span class="sig-paren">(</span><em>y</em>, <em>frame_length=2048</em>, <em>hop_length=512</em>, <em>center=True</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.feature.zero_crossing_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the zero-crossing rate of an audio time series.</p>
<dl class="docutils">
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,)]</span></dt>
<dd>Audio time series</dd>
<dt>frame_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>Length of the frame over which to compute zero crossing rates</dd>
<dt>hop_length <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0</span></dt>
<dd>Number of samples to advance for each frame</dd>
<dt>center <span class="classifier-delimiter">:</span> <span class="classifier">bool</span></dt>
<dd>If <cite>True</cite>, frames are centered by padding the edges of <cite>y</cite>.
This is similar to the padding in <cite>librosa.core.stft</cite>,
but uses edge-value copies instead of reflection.</dd>
<dt>kwargs <span class="classifier-delimiter">:</span> <span class="classifier">additional keyword arguments</span></dt>
<dd><p class="first">See <cite>librosa.core.zero_crossings</cite></p>
<div class="last admonition note">
<p class="first admonition-title">Note</p>
<p class="last">By default, the <cite>pad</cite> parameter is set to <cite>False</cite>, which
differs from the default specified by
<cite>librosa.core.zero_crossings</cite>.</p>
</div>
</dd>
</dl>
<dl class="docutils">
<dt>zcr <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(1, t)]</span></dt>
<dd><cite>zcr[0, i]</cite> is the fraction of zero crossings in the
<cite>i</cite> th frame</dd>
</dl>
<dl class="docutils">
<dt>librosa.core.zero_crossings</dt>
<dd>Compute zero-crossings in a time-series</dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">zero_crossing_rate</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
<span class="go">array([[ 0.134,  0.139, ...,  0.387,  0.322]])</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>
</div>
<div class="section" id="harmonic-percussive-source-separation">
<h1>Harmonic-percussive source separation<a class="headerlink" href="#harmonic-percussive-source-separation" title="Permalink to this headline">¶</a></h1>
</div>
<div class="section" id="module-librosa.output">
<span id="output-methods"></span><h1>Output methods<a class="headerlink" href="#module-librosa.output" title="Permalink to this headline">¶</a></h1>
<div class="section" id="output">
<h2>Output<a class="headerlink" href="#output" title="Permalink to this headline">¶</a></h2>
<div class="section" id="text-output">
<h3>Text output<a class="headerlink" href="#text-output" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="audio-output">
<h3>Audio output<a class="headerlink" href="#audio-output" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="librosa.output.annotation">
<code class="descclassname">librosa.output.</code><code class="descname">annotation</code><span class="sig-paren">(</span><em>path</em>, <em>intervals</em>, <em>annotations=None</em>, <em>delimiter='</em>, <em>'</em>, <em>fmt='%0.3f'</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.output.annotation" title="Permalink to this definition">¶</a></dt>
<dd><p>Save annotations in a 3-column format:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">intervals</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span><span class="n">intervals</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span><span class="n">annotations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>\<span class="n">n</span>
<span class="n">intervals</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span><span class="n">intervals</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span><span class="n">annotations</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>\<span class="n">n</span>
<span class="n">intervals</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span><span class="n">intervals</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span><span class="n">annotations</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>\<span class="n">n</span>
<span class="o">...</span>
</pre></div>
</div>
<p>This can be used for segment or chord annotations.</p>
<dl class="docutils">
<dt>path <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to save the output CSV file</dd>
<dt>intervals <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n, 2)]</span></dt>
<dd><p class="first">array of interval start and end-times.</p>
<p><cite>intervals[i, 0]</cite> marks the start time of interval <cite>i</cite></p>
<p class="last"><cite>intervals[i, 1]</cite> marks the end time of interval <cite>i</cite></p>
</dd>
<dt>annotations <span class="classifier-delimiter">:</span> <span class="classifier">None or list-like [shape=(n,)]</span></dt>
<dd>optional list of annotation strings. <cite>annotations[i]</cite> applies
to the time range <cite>intervals[i, 0]</cite> to <cite>intervals[i, 1]</cite></dd>
<dt>delimiter <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>character to separate fields</dd>
<dt>fmt <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>format-string for rendering time data</dd>
</dl>
<dl class="docutils">
<dt>ParameterError</dt>
<dd>if <cite>annotations</cite> is not <cite>None</cite> and length does
not match <cite>intervals</cite></dd>
</dl>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">feature</span><span class="o">.</span><span class="n">mfcc</span><span class="p">(</span><span class="n">y</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
</pre></div>
</div>
<p>Detect segment boundaries</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">boundaries</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">segment</span><span class="o">.</span><span class="n">agglomerative</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>Convert to time</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">boundary_times</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">frames_to_time</span><span class="p">(</span><span class="n">boundaries</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span>
<span class="gp">... </span>                                        <span class="n">hop_length</span><span class="o">=</span><span class="mi">512</span><span class="p">)</span>
</pre></div>
</div>
<p>Convert events boundaries to intervals</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">intervals</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">([</span><span class="n">boundary_times</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">],</span>
<span class="gp">... </span>                       <span class="n">boundary_times</span><span class="p">[</span><span class="mi">1</span><span class="p">:,</span> <span class="n">np</span><span class="o">.</span><span class="n">newaxis</span><span class="p">]])</span>
</pre></div>
</div>
<p>Make some fake annotations</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">labels</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Seg #</span><span class="si">{:03d}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">intervals</span><span class="p">))]</span>
</pre></div>
</div>
<p>Save the output</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">annotation</span><span class="p">(</span><span class="s1">&#39;segments.csv&#39;</span><span class="p">,</span> <span class="n">intervals</span><span class="p">,</span>
<span class="gp">... </span>                          <span class="n">annotations</span><span class="o">=</span><span class="n">labels</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.output.times_csv">
<code class="descclassname">librosa.output.</code><code class="descname">times_csv</code><span class="sig-paren">(</span><em>path</em>, <em>times</em>, <em>annotations=None</em>, <em>delimiter='</em>, <em>'</em>, <em>fmt='%0.3f'</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.output.times_csv" title="Permalink to this definition">¶</a></dt>
<dd><p>Save time steps as in CSV format.  This can be used to store the output
of a beat-tracker or segmentation algorithm.</p>
<p>If only <cite>times</cite> are provided, the file will contain each value
of <cite>times</cite> on a row:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">times</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>\<span class="n">n</span>
<span class="n">times</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>\<span class="n">n</span>
<span class="n">times</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>\<span class="n">n</span>
<span class="o">...</span>
</pre></div>
</div>
<p>If <cite>annotations</cite> are also provided, the file will contain
delimiter-separated values:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">times</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">annotations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>\<span class="n">n</span>
<span class="n">times</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="n">annotations</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>\<span class="n">n</span>
<span class="n">times</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="n">annotations</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>\<span class="n">n</span>
<span class="o">...</span>
</pre></div>
</div>
<dl class="docutils">
<dt>path <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>path to save the output CSV file</dd>
<dt>times <span class="classifier-delimiter">:</span> <span class="classifier">list-like of floats</span></dt>
<dd>list of frame numbers for beat events</dd>
<dt>annotations <span class="classifier-delimiter">:</span> <span class="classifier">None or list-like</span></dt>
<dd>optional annotations for each time step</dd>
<dt>delimiter <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>character to separate fields</dd>
<dt>fmt <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>format-string for rendering time</dd>
</dl>
<dl class="docutils">
<dt>ParameterError</dt>
<dd>if <cite>annotations</cite> is not <cite>None</cite> and length does not
match <cite>times</cite></dd>
</dl>
<p>Write beat-tracker time to CSV</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">())</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tempo</span><span class="p">,</span> <span class="n">beats</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">beat</span><span class="o">.</span><span class="n">beat_track</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="n">sr</span><span class="p">,</span> <span class="n">units</span><span class="o">=</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">times_csv</span><span class="p">(</span><span class="s1">&#39;beat_times.csv&#39;</span><span class="p">,</span> <span class="n">beats</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="librosa.output.write_wav">
<code class="descclassname">librosa.output.</code><code class="descname">write_wav</code><span class="sig-paren">(</span><em>path</em>, <em>y</em>, <em>sr</em>, <em>norm=False</em><span class="sig-paren">)</span><a class="headerlink" href="#librosa.output.write_wav" title="Permalink to this definition">¶</a></dt>
<dd><p>Output a time series as a .wav file</p>
<dl class="docutils">
<dt>Note: only mono or stereo, floating-point data is supported.</dt>
<dd>For more advanced and flexible output options, refer to
<cite>soundfile</cite>.</dd>
</dl>
<dl class="docutils">
<dt>path <span class="classifier-delimiter">:</span> <span class="classifier">str</span></dt>
<dd>path to save the output wav file</dd>
<dt>y <span class="classifier-delimiter">:</span> <span class="classifier">np.ndarray [shape=(n,) or (2,n)]</span></dt>
<dd>audio time series (mono or stereo)</dd>
<dt>sr <span class="classifier-delimiter">:</span> <span class="classifier">int &gt; 0 [scalar]</span></dt>
<dd>sampling rate of <cite>y</cite></dd>
<dt>norm <span class="classifier-delimiter">:</span> <span class="classifier">boolean [scalar]</span></dt>
<dd>enable amplitude normalization.
For floating point <cite>y</cite>, scale the data to the range [-1, +1].</dd>
</dl>
<p>Trim a signal to 5 seconds and save it back</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">y</span><span class="p">,</span> <span class="n">sr</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">librosa</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">example_audio_file</span><span class="p">(),</span>
<span class="gp">... </span>                     <span class="n">duration</span><span class="o">=</span><span class="mf">5.0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">librosa</span><span class="o">.</span><span class="n">output</span><span class="o">.</span><span class="n">write_wav</span><span class="p">(</span><span class="s1">&#39;file_trim_5s.wav&#39;</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">sr</span><span class="p">)</span>
</pre></div>
</div>
<p>soundfile.write</p>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Core methods</a><ul>
<li><a class="reference internal" href="#core-io-and-dsp">Core IO and DSP</a><ul>
<li><a class="reference internal" href="#audio-processing">Audio processing</a></li>
<li><a class="reference internal" href="#spectral-representations">Spectral representations</a></li>
<li><a class="reference internal" href="#magnitude-scaling">Magnitude scaling</a></li>
<li><a class="reference internal" href="#time-and-frequency-conversion">Time and frequency conversion</a></li>
<li><a class="reference internal" href="#pitch-and-tuning">Pitch and tuning</a></li>
<li><a class="reference internal" href="#dynamic-time-warping">Dynamic Time Warping</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-librosa.beat">Beat tracking</a><ul>
<li><a class="reference internal" href="#beat-and-tempo">Beat and tempo</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-librosa.feature">Feature extraction</a><ul>
<li><a class="reference internal" href="#id20">Feature extraction</a><ul>
<li><a class="reference internal" href="#spectral-features">Spectral features</a></li>
<li><a class="reference internal" href="#rhythm-features">Rhythm features</a></li>
<li><a class="reference internal" href="#feature-manipulation">Feature manipulation</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#harmonic-percussive-source-separation">Harmonic-percussive source separation</a></li>
<li><a class="reference internal" href="#module-librosa.output">Output methods</a><ul>
<li><a class="reference internal" href="#output">Output</a><ul>
<li><a class="reference internal" href="#text-output">Text output</a></li>
<li><a class="reference internal" href="#audio-output">Audio output</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<h3>Versions</h3>
<ul>
    <li><a href="../display-bin-centering/index.html">display-bin-centering</a></li>
    <li><a href="../master/index.html">master</a></li>
    <li><a href="../0.4.0rc1/index.html">0.4.0rc1</a></li>
    <li><a href="../0.4.0rc2/index.html">0.4.0rc2</a></li>
    <li><a href="../0.4.1/index.html">0.4.1</a></li>
    <li><a href="../0.4.1rc0/index.html">0.4.1rc0</a></li>
    <li><a href="../0.4.2/index.html">0.4.2</a></li>
    <li><a href="../0.4.3/index.html">0.4.3</a></li>
    <li><a href="../0.4.3rc0/index.html">0.4.3rc0</a></li>
    <li><a href="../0.5.0/index.html">0.5.0</a></li>
    <li><a href="../0.5.0rc0/index.html">0.5.0rc0</a></li>
    <li><a href="../0.5.1/index.html">0.5.1</a></li>
    <li><a href="../0.6.0/index.html">0.6.0</a></li>
    <li><a href="../0.6.0rc0/index.html">0.6.0rc0</a></li>
    <li><a href="../0.6.0rc1/index.html">0.6.0rc1</a></li>
    <li><a href="index.html">v0.1.0</a></li>
    <li><a href="../v0.4.0/index.html">v0.4.0</a></li>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="#">librosa 0.1.0 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2013, Dawen Liang, Brian McFee, Matt McVicar, Colin Raffel.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.6.
    </div>
  </body>
</html>